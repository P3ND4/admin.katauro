import{a as z,b as B,c as G}from"./chunk-VUFVQEOJ.js";import{a as $}from"./chunk-KVHQHHXP.js";import{$ as c,C as N,G as g,H as u,I as y,J as O,K as b,L as m,M as i,N as o,O as x,S as E,T as f,V as d,W as R,X as L,Y as q,_ as l,aa as _,ba as j,da as F,ea as U,fa as w,ga as P,ha as M,ma as k,n as h,o as v,oa as T,pa as A,qa as Q,u as S,v as a,va as W,x as C,xa as Y,y as I}from"./chunk-XPGVAPB5.js";var D=(t=>(t.pending="Pendiente",t.completed="Realizado",t.canceled="Cancelado",t))(D||{});var H=(n,r,e)=>({canceled:n,completed:r,pending:e}),te=n=>({closed:n}),ne=(n,r,e)=>[n,r,e],ie=()=>["N\xBA pedido","Fecha","Total","Tipo de entrega","Estado"];function re(n,r){n&1&&(i(0,"div",1),x(1,"app-box-loader",37),o()),n&2&&(a(),m("message","Actualizando..."))}function oe(n,r){if(n&1){let e=E();i(0,"div",38),f("click",function(){let s=h(e).$implicit,p=d();return v(p.changeState(s))}),i(1,"span",11),x(2,"img",29),l(3),o()()}if(n&2){let e=r.$implicit,t=d();a(),m("ngClass",w(3,H,t.states.canceled==e,t.states.completed==e,t.states.pending==e)),a(),m("src",t.states.completed==e?"check.svg":t.states.canceled==e?"x-red.svg":"clock.svg",S),a(),_(" ",e," ")}}function ae(n,r){if(n&1&&(i(0,"div",20)(1,"div",39),x(2,"img",29),o(),i(3,"div",40)(4,"span",41),l(5),o(),i(6,"span",42),l(7),o(),i(8,"span",43),l(9),o()(),i(10,"div",44)(11,"span",45),l(12),P(13,"currency"),o(),i(14,"span",46),l(15),o()()()),n&2){let e=r.$implicit;a(2),m("src",e.product.image,S),a(3),_(" ",e.product.genericProd==null?null:e.product.genericProd.name," "),a(2),_(" ",e.product.genericProd==null||e.product.genericProd.category==null?null:e.product.genericProd.category.nombre," "),a(2),_("Cant: ",e.count),a(3),c(M(13,6,e.product.price)),a(3),c(e.product.price)}}function le(n,r){if(n&1&&(i(0,"div",33)(1,"p"),l(2,"Nota adicional"),o(),i(3,"span"),l(4),o()()),n&2){let e=d();a(4),_('"',e.order==null||e.order.note==null?null:e.order.note.length,'"')}}function de(n,r){if(n&1&&(i(0,"div",33)(1,"p"),l(2,"Direcci\xF3n"),o(),i(3,"span"),l(4),o()()),n&2){let e=d();a(4),c((e.order==null?null:e.order.address)+", "+(e.order==null?null:e.order.city)+", "+(e.order==null?null:e.order.province))}}function se(n,r){if(n&1&&(i(0,"p"),l(1),o()),n&2){let e=d().$implicit;a(),c(e.id)}}function ce(n,r){if(n&1&&(i(0,"p"),l(1),o()),n&2){let e=d().$implicit,t=d(2);a(),c(t.getDateByOrd(e))}}function pe(n,r){if(n&1&&(i(0,"p"),l(1),P(2,"currency"),o()),n&2){let e=d().$implicit;a(),c(M(2,1,e.price+e.delPrice))}}function me(n,r){if(n&1&&(i(0,"p"),l(1),o()),n&2){let e=d().$implicit;a(),c(e.delivery?"A domicilio":"Retiro en tienda")}}function ge(n,r){n&1&&(i(0,"div",47),x(1,"img",29),i(2,"p"),l(3),o()()),n&2&&(a(),m("src","./_Dot_green.svg",S),a(2),c("Activo"))}function ue(n,r){if(n&1&&(i(0,"div",36),g(1,se,2,1,"p"),g(2,ce,2,1,"p"),g(3,pe,3,3,"p"),g(4,me,2,1,"p"),g(5,ge,4,2,"div",47),o()),n&2){let e=d().$implicit;m("className",`product-item ${e===""?"action":e.toLowerCase()}`),a(),u(e==="N\xBA pedido"?1:-1),a(),u(e==="Fecha"?2:-1),a(),u(e==="Total"?3:-1),a(),u(e==="Tipo de entrega"?4:-1),a(),u(e==="Estado"?5:-1)}}function xe(n,r){if(n&1&&(i(0,"div",36)(1,"div",36)(2,"p"),l(3),o()(),O(4,ue,6,6,"div",36,y),o()),n&2){let e=r.$implicit,t=d();m("className",`column ${e===""?"action":e.toLowerCase()}`),a(),m("className",`head-bar-item ${e===""?"action":e.toLowerCase()}`),a(2),c(e),a(),b(t.order==null||t.order.user==null?null:t.order.user.orders)}}var V=class n{constructor(r,e,t){this.http=r;this.cdr=e;this.errorServ=t}ngAfterViewInit(){console.log(this.order)}isDropdownOpen=!1;states=D;order;close=new N(!1);getDate(){let r=new Date(this.order?.createdAt??"");return`${r.getDate()}-${r.getMonth()+1}-${r.getFullYear()}`}getDateByOrd(r){let e=new Date(r.createdAt??"");return`${e.getDate()}-${e.getMonth()+1}-${e.getFullYear()}`}onClose(){this.close.emit(!0)}loading=!1;changeState(r){this.loading=!0,this.http.updateOrder(this.order?.id??"",{state:r}).subscribe({next:e=>{console.log(e),this.order&&(this.order.state=r),this.isDropdownOpen=!1,this.loading=!1,this.cdr.detectChanges()},error:e=>{this.errorServ.addError(z(e)),this.loading=!1,this.cdr.detectChanges()}})}static \u0275fac=function(e){return new(e||n)(C(B),C(k),C($))};static \u0275cmp=I({type:n,selectors:[["app-order-details"]],inputs:{order:"order"},outputs:{close:"close"},decls:95,vars:39,consts:[[1,"main"],[1,"loader-wrapper"],[1,"details-main"],[1,"cross",3,"click"],["src","x.svg","alt",""],[1,"head-container"],[1,"details-header"],[1,"id"],[1,"date"],[1,"actions"],[1,"input-content","drop",2,"position","relative",3,"click"],[1,"input-txt",3,"ngClass"],["src","chevron-down.svg","alt",""],[1,"drop-down",3,"ngClass"],[1,"drop-item"],[1,"button-chips"],["src","upload-cloud.svg","alt",""],[1,"order"],[1,"products"],[1,"order-summary"],[1,"variant"],[1,"check"],[1,"subtotal"],[1,"total-price"],[1,"divider"],[1,"client-info"],[1,"buyer-info"],[1,"user"],[1,"avatar"],["alt","",3,"src"],[1,"user-info"],[1,"name"],[1,"email"],[1,"contact-info"],[1,"client-orders"],[1,"head-bar"],[3,"className"],[3,"message"],[1,"drop-item",3,"click"],[1,"image"],[1,"prod-details"],[1,"p-name"],[1,"p-cat"],[1,"count"],[1,"pord-price"],[1,"dollars"],[1,"cup"],[1,"status"]],template:function(e,t){e&1&&(i(0,"div",0),g(1,re,2,1,"div",1),i(2,"div",2)(3,"div",3),f("click",function(){return t.onClose()}),x(4,"img",4),o(),i(5,"div",5)(6,"header",6)(7,"div",7)(8,"p"),l(9," Pedido "),i(10,"span"),l(11),o()(),i(12,"span",8),l(13),o()(),i(14,"div",9)(15,"div",10),f("click",function(){return t.states.canceled==(t.order==null?null:t.order.state)?"":t.isDropdownOpen=!t.isDropdownOpen}),i(16,"span",11),l(17),o(),x(18,"img",12),i(19,"div",13),O(20,oe,4,7,"div",14,y),o()(),i(22,"div",15),x(23,"img",16),i(24,"span"),l(25,"Reenviar email"),o()()()()(),i(26,"div",17)(27,"div",18)(28,"h3"),l(29,"Resumen de pago"),o(),i(30,"div",19),O(31,ae,16,8,"div",20,y),i(33,"div",21)(34,"div",22)(35,"h3"),l(36,"Subtotal"),o(),i(37,"h3"),l(38),P(39,"currency"),o()(),i(40,"div",22)(41,"h3"),l(42,"Transportaci\xF3n"),o(),i(43,"h3"),l(44),P(45,"currency"),o()(),i(46,"div",23),x(47,"div",24),i(48,"h2"),l(49,"Total"),o(),i(50,"h2"),l(51),P(52,"currency"),P(53,"currency"),o()()()()(),i(54,"div",25)(55,"h3"),l(56,"Informaci\xF3n del cliente"),o(),i(57,"div",26)(58,"div",27)(59,"div",28),x(60,"img",29),o(),i(61,"div",30)(62,"p",31),l(63),o(),i(64,"span",32),l(65),o()()(),i(66,"div",33)(67,"p"),l(68,"Tel\xE9fono"),o(),i(69,"span"),l(70),o()(),g(71,le,5,1,"div",33),o(),i(72,"h3"),l(73,"Informaci\xF3n de la persona que recibe"),o(),i(74,"div",26)(75,"div",33)(76,"p"),l(77,"Nombre y apellidos"),o(),i(78,"span"),l(79),o()(),i(80,"div",33)(81,"p"),l(82,"email"),o(),i(83,"span"),l(84),o()(),i(85,"div",33)(86,"p"),l(87,"Tel\xE9fono"),o(),i(88,"span"),l(89),o()(),g(90,de,5,1,"div",33),o()()()(),i(91,"div",34)(92,"div",35),O(93,xe,6,3,"div",36,y),o()()()),e&2&&(a(),u(t.loading?1:-1),a(10),c(t.order==null?null:t.order.id),a(2),_("Realizado el ",t.getDate()),a(3),m("ngClass",w(28,H,t.states.canceled==(t.order==null?null:t.order.state),t.states.completed==(t.order==null?null:t.order.state),t.states.pending==(t.order==null?null:t.order.state))),a(),_(" ",t.order==null?null:t.order.state," "),a(2),m("ngClass",U(32,te,!t.isDropdownOpen)),a(),b(w(34,ne,t.states.canceled,t.states.pending,t.states.completed)),a(11),b(t.order==null?null:t.order.products),a(7),c(M(39,20,t.order==null?null:t.order.price)),a(6),c(t.order&&t.order.delivery?M(45,22,t.order.delPrice):"--------"),a(7),_("",t.order!=null?M(52,24,t.order.price+t.order.delPrice):M(53,26,0)," "),a(9),m("src",(t.order==null||t.order.user==null?null:t.order.user.image)||"user.svg",S),a(3),j("",t.order==null||t.order.user==null?null:t.order.user.name," ",t.order==null||t.order.user==null?null:t.order.user.lastName),a(2),c(t.order==null||t.order.user==null?null:t.order.user.email),a(5),c(t.order==null||t.order.user==null?null:t.order.user.phone),a(),u(t.order!=null&&t.order.note?71:-1),a(8),j("",t.order==null?null:t.order.name," ",t.order==null?null:t.order.lastName),a(5),c(t.order==null?null:t.order.email),a(5),c(t.order==null?null:t.order.phone),a(),u(t.order!=null&&t.order.delivery?90:-1),a(3),b(F(38,ie)))},dependencies:[Q,T,G,A],styles:[".main[_ngcontent-%COMP%]{width:100%;height:95vh;display:flex;flex-direction:column;gap:48px;border-radius:var(--Corner-Small, 8px);background:var(--Gray-50, #FAFAFA);padding:24px 24px 24px 48px;box-sizing:border-box;box-shadow:0 12px 16px -4px #0a0d1214,0 4px 6px -2px #0a0d1208;border:1px solid var(--Gray-200, #E9EAEB);overflow:auto}.head-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:end;width:100%}.input-content.drop[_ngcontent-%COMP%]{cursor:pointer}.cross[_ngcontent-%COMP%]{position:absolute;padding:14px;align-self:flex-end;cursor:pointer}.details-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:40px;align-self:stretch}.details-header[_ngcontent-%COMP%]{margin-top:52px;display:flex;justify-content:space-between;align-items:center;align-self:stretch}.id[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-family:var(--montser-font);color:var(--Gray-700, #414651);font-size:28px;font-style:normal;font-weight:600;line-height:28px;margin:0}.id[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#007981}.date[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:400;line-height:24px}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.input-txt[_ngcontent-%COMP%]{text-align:center;gap:4px;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px}.input-txt.completed[_ngcontent-%COMP%]{background:var(--Success-50, #ECFDF3);color:var(--Success-700, #027A48)}.input-txt.pending[_ngcontent-%COMP%]{color:#b54708;background:var(--Warning-50, #FFFAEB)}.input-txt.canceled[_ngcontent-%COMP%]{color:#b42318;background:var(--Error-50, #FEF3F2)}.order[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:40px;align-self:stretch}.products[_ngcontent-%COMP%], .client-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:16px;flex:1 0 0}.products[_ngcontent-%COMP%]{max-width:600px}.products[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .client-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px;margin:0}.order-summary[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:100%;border-radius:var(--Corner-Small, 8px);border:.5px solid var(--Gray-500, #717680);padding:24px;box-sizing:border-box}.image[_ngcontent-%COMP%]{display:flex;width:86px;flex-direction:column;justify-content:center;align-items:center;aspect-ratio:1/1;border-radius:4px;overflow:hidden}.image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}.variant[_ngcontent-%COMP%]{display:flex;padding:16px;gap:16px;align-items:center;width:100%;box-sizing:border-box;background-color:#f0feff;border-radius:8px;border:1px solid var(--Brand-300, #98CDD2)}.prod-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.pord-price[_ngcontent-%COMP%]{display:flex;flex-direction:column}.count[_ngcontent-%COMP%], .dollars[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px}.p-name[_ngcontent-%COMP%]{color:var(--Brand-700, #007981);font-family:var(--montser-font);font-size:20px;font-style:normal;font-weight:600;line-height:30px}.p-cat[_ngcontent-%COMP%]{color:var(--Brand-600, #178C94);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:400;line-height:24px}.cup[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:400;line-height:18px}.check[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding-inline:24px;width:100%;box-sizing:border-box}.subtotal[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.subtotal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px;margin:0}.total-price[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;align-items:center;width:100%;padding-top:12px}.divider[_ngcontent-%COMP%]{position:absolute;top:0;width:100%;background:var(--Gray-200, #E9EAEB);height:1px}.total-price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:24px;font-style:normal;font-weight:600;line-height:32px;margin:0}.head-bar[_ngcontent-%COMP%]{display:flex;align-items:flex-start;align-self:stretch;width:100%}.head-bar-item[_ngcontent-%COMP%]{display:flex;flex:1;height:44px;padding:12px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);background:var(--Gray-50, #FAFAFA);box-sizing:border-box}.head-bar-item.action[_ngcontent-%COMP%]{min-height:44px}.head-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.column.nombre[_ngcontent-%COMP%]{min-width:312px}.column.action[_ngcontent-%COMP%]{flex:none;width:160px}.column.categor\\ed a[_ngcontent-%COMP%]{width:225px;flex:none}.product-item[_ngcontent-%COMP%]{display:flex;height:72px;padding:16px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);box-sizing:border-box;background-color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.action-button[_ngcontent-%COMP%]{border:none;background:none;padding:10px;border-radius:8px;cursor:pointer}.status[_ngcontent-%COMP%]{display:flex;padding:2px 8px 2px 6px;justify-content:center;align-items:center;gap:6px;border-radius:16px;background:var(--Success-50, #ECFDF3)}.category[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Gray-100, #F5F5F5)}.status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Success-700, #027A48);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px}.client-orders[_ngcontent-%COMP%]{display:flex;flex:1;height:100%;width:100%}.drop-down[_ngcontent-%COMP%]{display:flex;position:absolute;flex-direction:column;padding:4px 0;left:0;top:100%;width:100%;align-items:flex-start;border-radius:8px;border:1px solid var(--Gray-200, #E9EAEB);background:var(--White, #FFF);box-shadow:0 12px 16px -4px #0a0d1214,0 4px 6px -2px #0a0d1208}.drop-down.closed[_ngcontent-%COMP%]{display:none}.drop-item[_ngcontent-%COMP%]{display:flex;padding:10px 14px;align-items:center;gap:8px;align-self:stretch}.buyer-info[_ngcontent-%COMP%]{display:flex;padding:24px;flex-direction:column;align-items:flex-start;gap:16px;align-self:stretch;border-radius:var(--Corner-Small, 8px);border:.5px solid var(--Gray-500, #717680)}.user[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.avatar[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;overflow:hidden;flex-shrink:0;border:4px solid var(--Brand-100, #D3F3F5);box-sizing:border-box}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;object-position:center}.user-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.buyer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px}.buyer-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:400;line-height:24px}"]})};var fe=["search"],_e=()=>["N\xBA pedido","Fecha","Total","Tipo de entrega","Estado"],he=()=>["M\xE1s recientes","Antiguos","Realizado","Pendiente","Cancelado"],ve=(n,r,e)=>({pending:n,completed:r,canceled:e});function Ce(n,r){n&1&&(i(0,"div",2),x(1,"app-box-loader",22),o())}function ye(n,r){if(n&1){let e=E();i(0,"div",3)(1,"app-order-details",23),f("close",function(){h(e);let s=d();return v(s.openOrder=void 0)}),o()()}if(n&2){let e=d();a(),m("order",e.openOrder)}}function Oe(n,r){if(n&1){let e=E();i(0,"div",6)(1,"label"),l(2),o(),i(3,"img",24),f("click",function(){let s=h(e).$implicit,p=d();return v(p.onDeleteFilter(s))}),o()()}if(n&2){let e=r.$implicit;a(2),_(" ",e," ")}}function be(n,r){if(n&1){let e=E();i(0,"div",26),f("click",function(){let s=h(e).$implicit,p=d(2);return v(["Realizado","Pendiente","Cancelado"].includes(s)?p.onStateFilter(s):p.onOrderBy(s=="M\xE1s recientes"?2:1))}),i(1,"p"),l(2),o()()}if(n&2){let e=r.$implicit;a(2),c(e)}}function Pe(n,r){n&1&&(i(0,"div",12),O(1,be,3,1,"div",25,y),o()),n&2&&(a(),b(F(0,he)))}function Me(n,r){if(n&1&&(i(0,"p"),l(1),o()),n&2){let e=d().$implicit;a(),c(e.id)}}function Ee(n,r){if(n&1&&(i(0,"p"),l(1),o()),n&2){let e=d().$implicit,t=d(2);a(),c(t.getDate(e))}}function Se(n,r){if(n&1&&(i(0,"p"),l(1),P(2,"currency"),o()),n&2){let e=d().$implicit;a(),c(M(2,1,e.price+e.delPrice))}}function we(n,r){if(n&1&&(i(0,"p"),l(1),o()),n&2){let e=d().$implicit;a(),c(e.delivery?"A domicilio":"Retiro en tienda")}}function Fe(n,r){if(n&1&&(i(0,"div",28),x(1,"img",29),i(2,"span"),l(3),o()()),n&2){let e=d().$implicit,t=d(2);m("ngClass",w(3,ve,t.states.pending==e.state,t.states.completed==e.state,t.states.canceled==e.state)),a(),m("src",t.states.completed==e.state?"check.svg":t.states.canceled==e.state?"x-red.svg":"clock.svg",S),a(2),c(e.state)}}function De(n,r){if(n&1){let e=E();i(0,"div",27),f("click",function(){let s=h(e).$implicit,p=d(2);return v(p.onOpenOrder(s))}),g(1,Me,2,1,"p"),g(2,Ee,2,1,"p"),g(3,Se,3,3,"p"),g(4,we,2,1,"p"),g(5,Fe,4,7,"div",28),o()}if(n&2){let e=d().$implicit;m("className",`product-item ${e===""?"action":e.toLowerCase()}`),a(),u(e==="N\xBA pedido"?1:-1),a(),u(e==="Fecha"?2:-1),a(),u(e==="Total"?3:-1),a(),u(e==="Tipo de entrega"?4:-1),a(),u(e==="Estado"?5:-1)}}function Ie(n,r){if(n&1&&(i(0,"div",21)(1,"div",21)(2,"p"),l(3),o()(),O(4,De,6,6,"div",21,y),o()),n&2){let e=r.$implicit,t=d();m("className",`column ${e===""?"action":e.toLowerCase()}`),a(),m("className",`head-bar-item ${e===""?"action":e.toLowerCase()}`),a(2),c(e),a(),b(t.orders)}}var J=class n{constructor(r,e,t,s,p){this.router=r;this.route=e;this.http=t;this.cdr=s;this.errorServ=p}filterMenu=!1;stateParser=["Cancelado","Realizado","Pendiente"];count=0;orders=[];orderOpen=!0;openOrder;options={};search;filters=[];querySub;states=D;ngOnInit(){this.querySub=this.route.queryParams.subscribe(r=>this.loadQuerys())}loadQuerys(){this.filters=[];let r=this.route.snapshot.queryParamMap.get("order");this.options.order=r=="1"?1:r=="2"?2:void 0,this.options.order&&this.filters.push(this.options.order==2?"M\xE1s recientes":"Antiguos");let e=this.route.snapshot.queryParamMap.get("search");this.options.search=e??void 0,this.options.search&&this.filters.push(this.options.search);let t=this.route.snapshot.queryParamMap.get("state");this.options.state=t??void 0,t&&t.split("-").map(s=>this.filters.push(this.stateParser[s])),this.readData()}onDeleteFilter(r){if(["Realizado","Pendiente","Cancelado"].includes(r)){let t=this.options.state.split("-").map(p=>p),s=this.stateParser.indexOf(r);var e="";for(let p=0;p<t.length;p++)t[p]!=s&&(p!=0&&(e+=e.length>0?"-":""),e+=t[p]);this.options.state=e}else["M\xE1s recientes","Antiguos"].includes(r)?this.options.order=void 0:this.options.search=void 0;this.router.navigate(["dashboard","orders"],{queryParams:this.options})}readData(){this.loading=!0,this.http.getOrders(this.options).subscribe({next:r=>{this.orders=r,console.log(this.orders),this.loading=!1,this.cdr.detectChanges()},error:r=>{this.errorServ.addError(z(r)),this.loading=!1,this.cdr.detectChanges()}})}onOpenOrder(r){this.openOrder=r,this.orderOpen=!0}onStateFilter(r){if(this.options.state?.split("-").includes(this.stateParser.indexOf(r).toString()))return;let t={search:this.options.search,order:this.options.order,state:this.options.state?this.options.state+`-${this.stateParser.indexOf(r)}`:`${this.stateParser.indexOf(r)}`};this.router.navigate(["dashboard","orders"],{queryParams:t})}onOrderBy(r){this.options.order=r;let e={search:this.options.search,order:this.options.order,state:this.options.state};this.router.navigate(["dashboard","orders"],{queryParams:e})}loading=!1;onSearch(){let e={search:this.search.nativeElement.value,order:this.options.order,state:this.options.state};this.router.navigate(["dashboard","orders"],{queryParams:e})}getDate(r){let e=new Date(r.createdAt);return`${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()} `}static \u0275fac=function(e){return new(e||n)(C(Y),C(W),C(B),C(k),C($))};static \u0275cmp=I({type:n,selectors:[["app-orders"]],viewQuery:function(e,t){if(e&1&&R(fe,5),e&2){let s;L(s=q())&&(t.search=s.first)}},decls:35,vars:5,consts:[["search",""],[1,"orders-main"],[1,"loader-wrapper"],[1,"ord-detail"],[1,"ord-header"],[1,"ord-actions"],[1,"button-chips"],["src","upload-cloud.svg","alt",""],[1,"filters"],[1,"filters-dorp-menu"],[1,"button-chips",3,"click"],["src","Filters lines.svg","alt",""],[1,"dropdown-content"],[1,"spacing",2,"flex","1"],[1,"input-base"],["src","search.svg","alt","",3,"click"],["type","text","placeholder","Buscar",3,"keyup.enter"],[1,"ord-container"],[1,"order-list-header"],[1,"count"],[1,"head-bar"],[3,"className"],["message","Cargando pedidos..."],[3,"close","order"],["src","x.svg","alt","",3,"click"],[1,"dropdown-item"],[1,"dropdown-item",3,"click"],[3,"click","className"],[1,"input-txt",3,"ngClass"],["alt","",3,"src"]],template:function(e,t){if(e&1){let s=E();i(0,"div",1),g(1,Ce,2,0,"div",2),g(2,ye,2,1,"div",3),i(3,"header",4)(4,"h1"),l(5,"Productos"),o(),i(6,"div",5)(7,"button",6),x(8,"img",7),i(9,"label"),l(10," Importar "),o()()()(),i(11,"div",8),O(12,Oe,4,1,"div",6,y),i(14,"div",9)(15,"button",10),f("click",function(){return h(s),v(t.filterMenu=!t.filterMenu)}),x(16,"img",11),i(17,"label"),l(18,"Filtros"),o()(),g(19,Pe,3,1,"div",12),o(),x(20,"div",13),i(21,"div",14)(22,"img",15),f("click",function(){return h(s),v(t.onSearch())}),o(),i(23,"input",16,0),f("keyup.enter",function(){return h(s),v(t.onSearch())}),o()()(),i(25,"div",17)(26,"header",18)(27,"h2"),l(28,"Pedidos"),o(),i(29,"div",19)(30,"p"),l(31),o()()(),i(32,"div",20),O(33,Ie,6,3,"div",21,y),o()()()}e&2&&(a(),u(t.loading?1:-1),a(),u(t.openOrder?2:-1),a(10),b(t.filters),a(7),u(t.filterMenu?19:-1),a(12),_("",t.count," pedidos"),a(2),b(F(4,_e)))},dependencies:[V,T,G,A],styles:[".orders-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px;position:relative}.ord-detail[_ngcontent-%COMP%]{position:absolute;z-index:1;width:calc(100% - 40px);left:20px;height:100%;object-position:center;box-sizing:border-box}.ord-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-inline:32px}.ord-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}h1[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:30px;font-style:normal;font-weight:600;line-height:38px;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;padding-inline:32px}.order-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px 24px;gap:8px}.order-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:500;line-height:28px;margin:0}.order-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Brand-700, #007981);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.ord-container[_ngcontent-%COMP%]{margin-inline:32px;display:flex;flex-direction:column;align-items:flex-start;align-self:stretch;border-radius:12px;border:1px solid var(--Gray-200, #E9EAEB);background:var(--White, #FFF);box-shadow:0 1px 3px #0a0d121a,0 1px 2px #0a0d120f}.count[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Brand-50, #F0FEFF)}.head-bar[_ngcontent-%COMP%]{display:flex;align-items:flex-start;align-self:stretch}.head-bar-item[_ngcontent-%COMP%]{display:flex;flex:1;height:44px;padding:12px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);background:var(--Gray-50, #FAFAFA);box-sizing:border-box}.head-bar-item.action[_ngcontent-%COMP%]{min-height:44px}.head-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.column.nombre[_ngcontent-%COMP%]{min-width:312px}.column.action[_ngcontent-%COMP%]{flex:none;width:160px}.column.categor\\ed a[_ngcontent-%COMP%]{width:225px;flex:none}.product-item[_ngcontent-%COMP%]{display:flex;height:72px;padding:16px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);box-sizing:border-box;cursor:pointer}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.action-button[_ngcontent-%COMP%]{border:none;background:none;padding:10px;border-radius:8px;cursor:pointer}.status[_ngcontent-%COMP%]{display:flex;padding:2px 8px 2px 6px;justify-content:center;align-items:center;gap:6px;border-radius:16px;background:var(--Success-50, #ECFDF3)}.category[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Gray-100, #F5F5F5)}.status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Success-700, #027A48);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px}.pagination[_ngcontent-%COMP%]{display:flex;padding:12px 24px 16px;justify-content:space-between;align-items:center;align-self:stretch;border:0 solid var(--Gray-200, #E9EAEB)}.pages[_ngcontent-%COMP%]{display:flex}.page[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;box-sizing:border-box;padding:12px}.page[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Gray-500, #717680);text-align:center;font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px}.filters-dorp-menu[_ngcontent-%COMP%]{position:relative}.dropdown-content[_ngcontent-%COMP%]{display:flex;width:292px;position:absolute;background-color:var(--White, #FFF);min-width:160px;box-shadow:0 4px 8px #0000001a;border-radius:8px;z-index:1;top:48px;left:0;flex-direction:column;padding:8px 0}.dropdown-item[_ngcontent-%COMP%]{display:flex;padding:10px 14px;align-items:center;gap:8px;align-self:stretch;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:500;line-height:24px;margin:0}.page.active[_ngcontent-%COMP%]{background:#f0feff}.page.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Brand-900, #175659)}.input-txt[_ngcontent-%COMP%]{text-align:center;gap:4px;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px}.input-txt.completed[_ngcontent-%COMP%]{background:var(--Success-50, #ECFDF3);color:var(--Success-700, #027A48)}.input-txt.pending[_ngcontent-%COMP%]{color:#b54708;background:var(--Warning-50, #FFFAEB)}.input-txt.canceled[_ngcontent-%COMP%]{color:#b42318;background:var(--Error-50, #FEF3F2)}"]})};export{J as Orders};
