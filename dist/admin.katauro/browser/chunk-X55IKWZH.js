import"./chunk-BYXBJQAS.js";import{a as le}from"./chunk-ISP3C4HY.js";import{a as W,b as f,c as J,d as X,e as K,f as Y,g as Z,h as ee,i as te,j as ie,k as ne,m as re,o as oe,p as ae}from"./chunk-JM7D3BYY.js";import{a as Q}from"./chunk-RUJGDCOP.js";import{Ba as j,Da as B,G as v,Ga as b,H as x,Ha as $,I as S,Ia as U,K as F,L as k,M as h,N as r,O as o,P as m,T as C,V as g,X as u,Y as O,Z as D,_ as I,ba as s,ca as T,da as M,ha as y,n as d,o as p,ra as q,u as P,ua as H,v as c,wa as L,x as E,y as R,ya as G}from"./chunk-ZZRN4C6H.js";var ue=["fileInput"],me=["fileInputVariants"],ge=["finish"],_e=["color"],z=a=>({hover:a}),se=a=>({selected:a}),ce=a=>({"non-active":a});function he(a,n){a&1&&(r(0,"div",5),m(1,"app-box-loader"),o())}function fe(a,n){if(a&1){let e=C();r(0,"div",52),g("click",function(i){let l=d(e).$implicit;return u(2).selectCategory(l.id),p(i.stopPropagation())}),r(1,"p"),s(2),o()()}if(a&2){let e=n.$implicit;c(2),T(e.nombre)}}function ve(a,n){if(a&1){let e=C();r(0,"div",50),g("click",function(i){return d(e),p(i.stopPropagation())}),F(1,fe,3,1,"div",51,S),o()}if(a&2){let e=u();c(),k(e.categories)}}function xe(a,n){if(a&1&&(r(0,"div",28),m(1,"img",53),o()),a&2){let e=u();c(),h("src",e.imagePreview[0],P)}}function Ce(a,n){if(a&1){let e=C();r(0,"div",52),g("click",function(i){let l=d(e).$implicit;return u(2).addFinish(l),p(i.stopPropagation())}),r(1,"div",55),m(2,"img",56),o(),r(3,"p"),s(4),o(),r(5,"img",57),g("click",function(i){let l=d(e).$implicit;return u(2).deleteFinish(l.id),p(i.stopPropagation())}),o()()}if(a&2){let e=n.$implicit;c(2),h("src",e.image,P),c(2),T(e.text)}}function be(a,n){if(a&1){let e=C();r(0,"div",50),g("click",function(i){return d(e),p(i.stopPropagation())}),r(1,"div",52),g("click",function(){d(e);let i=u();return p(i.showDialog=4)}),m(2,"img",54),r(3,"p"),s(4,"Agregar terminaci\xF3n"),o()(),F(5,Ce,6,2,"div",51,S),o()}if(a&2){let e=u();c(5),k(e.aviableFinishes)}}function Pe(a,n){if(a&1){let e=C();r(0,"div",35)(1,"div",58)(2,"div",55),m(3,"img",59),o(),r(4,"p"),s(5),o()(),r(6,"img",60),g("click",function(){let i=d(e).$implicit,l=u();return p(l.removeFinish(i.id))}),o()()}if(a&2){let e=n.$implicit;c(3),h("src",e.image,P),c(2),T(e.text)}}function ye(a,n){a&1&&m(0,"div",41)}function we(a,n){a&1&&m(0,"div",41)}function Ve(a,n){a&1&&m(0,"div",67)}function Ee(a,n){if(a&1){let e=C();r(0,"div",66),g("click",function(){let i=d(e).$index,l=u(2);return p(l.currentVariant=i)}),r(1,"p"),s(2),o(),v(3,Ve,1,0,"div",67),o()}if(a&2){let e=n.$index,t=u(2);c(2),M("Variable ",e+1),c(),x(t.currentVariant===e?3:-1)}}function Se(a,n){if(a&1){let e=C();r(0,"div",44)(1,"div",61),F(2,Ee,4,2,"div",62,S),m(4,"div",63),o(),r(5,"button",64),g("click",function(){d(e);let i=u();return p(i.addVariant())}),m(6,"img",65),r(7,"label"),s(8,"Agregar variable"),o()()()}if(a&2){let e=u();c(2),k(e.variants.controls)}}function Fe(a,n){if(a&1){let e=C();r(0,"div",69)(1,"div",82),g("click",function(){d(e);let i=u(3);return p(i.defaultVAriant=i.currentVariant)}),r(2,"div",83),m(3,"img",84),o()(),r(4,"div",85)(5,"p"),s(6,"Producto predeterminado "),m(7,"br"),r(8,"span"),s(9,"Este producto aparecer\xE1 como opci\xF3n predeterminada en la galer\xEDa de productos."),o()()()()}if(a&2){let e=u(3);c(),h("ngClass",y(2,ce,e.defaultVAriant!==e.currentVariant)),c(),h("ngClass",y(4,ce,e.defaultVAriant!==e.currentVariant))}}function ke(a,n){if(a&1){let e=C();r(0,"div",52),g("click",function(i){let l=d(e).$implicit;return u(4).onSelectColor(l),p(i.stopPropagation())}),r(1,"div",55),m(2,"img",59),o(),r(3,"p"),s(4),o(),r(5,"img",57),g("click",function(i){let l=d(e).$implicit;return u(4).deleteColor(l.id),p(i.stopPropagation())}),o()()}if(a&2){let e=n.$implicit;c(2),h("src",e.image,P),c(2),T(e.name)}}function Me(a,n){if(a&1){let e=C();r(0,"div",50),g("click",function(i){return d(e),p(i.stopPropagation())}),r(1,"div",52),g("click",function(){d(e);let i=u(3);return p(i.showDialog=5)}),m(2,"img",54),r(3,"p"),s(4,"Agregar color"),o()(),F(5,ke,6,2,"div",51,S),o()}if(a&2){let e=u(3);c(5),k(e.aviavleColors)}}function Te(a,n){if(a&1&&(r(0,"div",35)(1,"div",58)(2,"div",55),m(3,"img",59),o(),r(4,"p"),s(5),o()(),m(6,"img",86),o()),a&2){let e=u(3);c(3),h("src",e.color[e.currentVariant]==null?null:e.color[e.currentVariant].image,P),c(2),T(e.color[e.currentVariant]==null?null:e.color[e.currentVariant].name)}}function Oe(a,n){if(a&1&&(r(0,"div",81),m(1,"img",87),o()),a&2){let e=n.$implicit;c(),h("src",e,P)}}function De(a,n){if(a&1){let e=C();r(0,"div",68),v(1,Fe,10,6,"div",69),r(2,"div",10)(3,"label"),s(4,"Color"),o(),r(5,"div",20)(6,"div",21),g("click",function(){d(e);let i=u(2);return p(i.openFinishModal(3))}),r(7,"label",22),s(8," Selecciona el color del producto "),o(),m(9,"img",23),v(10,Me,7,0,"div",24),o(),v(11,Te,7,2,"div",35),o(),m(12,"div",8),o(),r(13,"div",10)(14,"label",70),s(15,"Precio"),o(),r(16,"div",12),m(17,"input",71),o(),m(18,"div",8),o(),r(19,"div",10)(20,"label",72),s(21,"Stock"),o(),r(22,"div",73)(23,"div",74),g("click",function(){d(e);let i=u(2);return p(i.minus())}),m(24,"img",75),o(),m(25,"input",76),r(26,"div",74),g("click",function(){d(e);let i=u(2);return p(i.plus())}),m(27,"img",77),o()()(),r(28,"div",10)(29,"div",25)(30,"label",26),s(31,"Im\xE1genes"),o(),r(32,"p"),s(33,"Comparte algunas im\xE1genes del producto."),o()(),r(34,"div",78)(35,"div",29),g("dragover",function(i){d(e);let l=u(2);return p(l.onDragOver(i))})("dragleave",function(i){d(e);let l=u(2);return p(l.onDragLeave(i))})("drop",function(i){d(e);let l=u(2);return p(l.onDrop(i))})("click",function(i){d(e);let l=u(2);return p(l.onFilesSelected(i))}),r(36,"input",79,1),g("change",function(i){d(e);let l=u(2);return p(l.onFileChange(i))}),o(),r(38,"div",31),m(39,"img",32),o(),r(40,"div",33)(41,"p")(42,"span",34),s(43,"Haga clic para cargar"),o(),s(44," o arrastrar y soltar "),o(),r(45,"p"),s(46,"SVG, PNG, JPG or GIF"),o()()(),r(47,"div",80),F(48,Oe,2,1,"div",81,S),o()(),m(50,"div",8),o()()}if(a&2){let e=u().$index,t=u();h("formGroupName",e),c(),x(t.typology?-1:1),c(9),x(t.showDialog===3?10:-1),c(),x(t.color[t.currentVariant]?11:-1),c(24),h("ngClass",y(5,z,t.isHovering)),c(13),k(t.variantPreviews[t.currentVariant])}}function Ie(a,n){if(a&1&&v(0,De,51,7,"div",68),a&2){let e=n.$index,t=u();x(t.currentVariant==e?0:-1)}}function Ge(a,n){if(a&1&&(r(0,"div",28),m(1,"img",53),o()),a&2){let e=u(2);c(),h("src",e.imagePreview[1],P)}}function ze(a,n){if(a&1){let e=C();r(0,"div",88),g("click",function(){d(e);let i=u();return p(i.closeDialog())}),r(1,"div",89),g("click",function(i){return d(e),p(i.stopPropagation())}),r(2,"h2"),s(3,"Agregar terminaci\xF3n"),o(),r(4,"div",90)(5,"label",91),s(6," Nombre "),o(),r(7,"div",92),m(8,"input",93),o()(),r(9,"p"),s(10,"Imagen"),o(),r(11,"div",94)(12,"div",27)(13,"div",95),g("dragover",function(i){d(e);let l=u();return p(l.onDragOver(i,1))})("dragleave",function(i){d(e);let l=u();return p(l.onDragLeave(i,1))})("drop",function(i){d(e);let l=u();return p(l.onDrop(i,1))})("click",function(i){d(e);let l=u();return p(l.onFilesSelected(i,1))}),r(14,"input",30,2),g("change",function(i){d(e);let l=u();return p(l.onFileChange(i,1))}),o(),r(16,"div",31),m(17,"img",32),o(),r(18,"div",33)(19,"p")(20,"span",34),s(21,"Haga clic para cargar"),o(),s(22," o arrastrar y soltar "),o(),r(23,"p"),s(24,"SVG, PNG, JPG or GIF"),o()()(),v(25,Ge,2,1,"div",28),o()(),r(26,"div",96)(27,"button",97),g("click",function(){d(e);let i=u();return p(i.showDialog=0)}),r(28,"label",98),s(29," Cancelar "),o()(),r(30,"button",99)(31,"label"),s(32," Guardar "),o()()()()()}if(a&2){let e=u();c(13),h("ngClass",y(2,z,e.isHovering)),c(12),x(e.canPreview(1)?25:-1)}}function Ae(a,n){if(a&1&&(r(0,"div",28),m(1,"img",53),o()),a&2){let e=u(2);c(),h("src",e.imagePreview[2],P)}}function Ne(a,n){if(a&1){let e=C();r(0,"div",88),g("click",function(){d(e);let i=u();return p(i.closeDialog())}),r(1,"div",89),g("click",function(i){return d(e),p(i.stopPropagation())}),r(2,"h2"),s(3,"Agregar "),o(),r(4,"div",90)(5,"label",91),s(6," Nombre "),o(),r(7,"div",92),m(8,"input",93),o()(),r(9,"p"),s(10,"Imagen"),o(),r(11,"div",94)(12,"div",27)(13,"div",95),g("dragover",function(i){d(e);let l=u();return p(l.onDragOver(i,2))})("dragleave",function(i){d(e);let l=u();return p(l.onDragLeave(i,2))})("drop",function(i){d(e);let l=u();return p(l.onDrop(i,2))})("click",function(i){d(e);let l=u();return p(l.onFilesSelected(i,2))}),r(14,"input",30,3),g("change",function(i){d(e);let l=u();return p(l.onFileChange(i,2))}),o(),r(16,"div",31),m(17,"img",32),o(),r(18,"div",33)(19,"p")(20,"span",34),s(21,"Haga clic para cargar"),o(),s(22," o arrastrar y soltar "),o(),r(23,"p"),s(24,"SVG, PNG, JPG or GIF"),o()()(),v(25,Ae,2,1,"div",28),o()(),r(26,"div",96)(27,"button",97),g("click",function(){d(e);let i=u();return p(i.showDialog=0)}),r(28,"label",98),s(29," Cancelar "),o()(),r(30,"button",99)(31,"label"),s(32," Guardar "),o()()()()()}if(a&2){let e=u();c(13),h("ngClass",y(2,z,e.isHovering)),c(12),x(e.canPreview(2)?25:-1)}}function Re(a,n){if(a&1&&(r(0,"div",49)(1,"label"),s(2),o()()),a&2){let e=u();c(2),M(" ",e.progress,"% ")}}var de=class a{constructor(n,e,t,i,l,_,w){this.router=n;this.fb=e;this.cdr=t;this.route=i;this.http=l;this.cloudy=_;this.errorServ=w;this.createColor=e.group({name:["",f.required],image:[null,f.required]}),this.createFinish=e.group({name:["",f.required],image:[null,f.required]}),this.createProductForm=this.fb.group({name:["",f.required],subtitle:["",f.required],description:["",[f.required,f.maxLength(500)]],details:["",[f.required,f.maxLength(80)]],vector:[null,f.required],categoryId:["",f.required],finishesId:[[],f.minLength(1)],variants:this.fb.array([])}),this.addVariant()}file;createFinish;createColor;imagePreview=[void 0,void 0,void 0,void 0];isHovering=!1;isHoveringVariant=!1;createProductForm;finishes=[];color=[void 0];editProduct;subscript;fileInput;fileInputVariants;finishInput;colorInput;typology=!0;defaultVAriant=0;currentVariant=0;variantPreviews=[[]];showDialog=0;aviableFinishes=[];aviavleColors=[];categories=[];edit=!1;progress=-1;ngOnInit(){this.subscript=this.route.queryParams.subscribe(()=>{this.chargeComponentData()})}loading=!1;chargeComponentData(){let n=this.route.snapshot.queryParamMap.get("edit");if(this.edit=n=="true",this.loading=!0,this.http.getCategories().subscribe({next:e=>{this.categories=e,this.categories=this.categories.filter(t=>t.nombre!="Otras"),console.log(this.categories),console.log(e),n||(this.loading=!1),this.cdr.detectChanges()},error:e=>{this.errorServ.addError(b(e)),this.loading=!1}}),this.http.getColors().subscribe({next:e=>this.aviavleColors=e,error:e=>{this.errorServ.addError(b(e)),this.loading=!1}}),this.http.getFinishes().subscribe({next:e=>this.aviableFinishes=e,error:e=>{this.errorServ.addError(b(e)),this.loading=!1}}),this.edit){let e=this.route.snapshot.queryParamMap.get("id");this.http.getProductById(e||"").subscribe({next:t=>{this.editProduct=t,console.log(this.editProduct),n&&this.setValuesForEdit()},error:t=>{this.errorServ.addError(b(t)),this.loading=!1,this.cdr.detectChanges(),this.router.navigate(["dashboard/products"])}})}}setValuesForEdit(){if(this.editProduct){if(this.createProductForm.get("name")?.setValue(this.editProduct.name),this.createProductForm.get("subtitle")?.setValue(this.editProduct.subtitle),this.createProductForm.get("description")?.setValue(this.editProduct.description),this.createProductForm.get("details")?.setValue(this.editProduct.details.map(n=>n.text).join(`
`)),this.createProductForm.get("vector")?.setValue({vector:this.editProduct.vector,public_id:this.editProduct.vPublicId}),this.createProductForm.get("categoryId")?.setValue(this.editProduct.category.id),this.createProductForm.get("finishesId")?.setValue(this.editProduct.finish.map(n=>n.finishId)),this.typology=this.editProduct.typology=="Simple",this.finishes=this.editProduct.finish.map(n=>this.aviableFinishes.find(e=>e.id==n.finishId)).filter(n=>n!=null),this.imagePreview[0]=this.editProduct.vector,this.variants.controls.length!=this.editProduct.variants.length)for(let n=0;n<this.editProduct.variants.length-1;n++)this.addVariant();this.currentVariant=0,this.editProduct.variants.forEach((n,e)=>{this.variants.controls[e].get("colorId")?.setValue(n.color?.id),this.color[e]=n.color,this.variants.controls[e].get("stock")?.setValue(n.stock),this.variants.controls[e].get("price")?.setValue(n.price),this.variants.controls[e].get("variantImages")?.patchValue(n.images.map(t=>({link:t.link,public_id:t.public_id}))),this.variantPreviews[e]=n.images.map(t=>t.link)}),this.loading=!1,this.cdr.detectChanges()}}onTypologyChange(n){this.typology=n,this.typology==!0&&(this.currentVariant=this.defaultVAriant),this.cdr.detectChanges()}selectCategory(n){this.createProductForm.get("categoryId")?.setValue(n),this.closeDialog()}getCategory(){let n=this.categories.find(e=>this.createProductForm.get("categoryId")?.value==e.id);return n?n.nombre:"Selecciona una categor\xEDa"}onDragOver(n,e){n.preventDefault(),e==null?this.isHoveringVariant=!0:this.isHovering=!0}onDragLeave(n,e){e==null?this.isHoveringVariant=!1:this.isHovering=!1}async onDrop(n,e){if(n.preventDefault(),e==null){if(this.isHoveringVariant=!1,n.dataTransfer?.files&&n.dataTransfer.files.length>0){var t=[...n.dataTransfer.files];t.length>5&&(t=t.slice(0,5)),this.uploadMulti(t),n.dataTransfer.clearData()}return}if(this.isHovering=!1,n.dataTransfer?.files&&n.dataTransfer.files.length>0){let i=n.dataTransfer.files[0];this.upload(i,e),n.dataTransfer.clearData()}}onFilesSelected(n,e){if(e==null)this.fileInputVariants.nativeElement.click();else switch(e){case 0:this.fileInput.nativeElement.click();break;case 1:this.finishInput.nativeElement.click();break;case 2:this.colorInput.nativeElement.click()}}onFileChange(n,e){let t=n.target;if(e==null){if(t.files&&t.files.length>0){var i=[...t.files];i.length>5&&(i=i.slice(0,5)),this.uploadMulti(i)}return}if(t.files&&t.files.length>0){let l=t.files[0];this.upload(l,e)}}readFileAsDataURL(n){return new Promise((e,t)=>{let i=new FileReader;i.onload=()=>e(i.result),i.onerror=l=>t(l),i.readAsDataURL(n)})}loadImageVariants(n){Promise.all(n.map(e=>this.readFileAsDataURL(e))).then(e=>{this.variantPreviews[this.currentVariant]=e,this.cdr.detectChanges()}).catch(e=>{console.error("Error leyendo im\xE1genes",e)})}openFinishModal(n){this.showDialog=n==this.showDialog?0:n}closeDialog(){this.showDialog=0,document.body.style.overflow="",this.cdr.detectChanges()}canPreview(n){return this.imagePreview[n]}addVariant(){let n=this.fb.group({stock:[0,f.required],price:[0,f.required],colorId:["",f.required],variantImages:[[],[f.required,f.minLength(5)]]});this.variants.push(n),this.color.push(void 0)}get variants(){return this.createProductForm.get("variants")}plus(){let n=this.variants.controls[this.currentVariant].value.stock;this.variants.controls[this.currentVariant].get("stock")?.setValue(n+1),this.cdr.detectChanges()}minus(){let n=this.variants.controls[this.currentVariant].value.stock;this.variants.controls[this.currentVariant].get("stock")?.setValue(n-1)}onSubmit(){if(this.createProductForm.valid){let e=[...this.variants.value];this.defaultVAriant!==0&&([e[0],e[this.defaultVAriant]]=[e[this.defaultVAriant],e[0]]);let t={name:this.createProductForm.get("name")?.value,description:this.createProductForm.get("description")?.value,subtitle:this.createProductForm.get("subtitle")?.value,categoryId:this.createProductForm.get("categoryId")?.value,typology:this.typology?"Simple":"Variante",vector:this.createProductForm.get("vector")?.value.vector,vPublicId:this.createProductForm.get("vector")?.value?.vPublicId,details:this.createProductForm.get("details")?.value.split(`
`),finishId:this.createProductForm.get("finishesId")?.value,variants:e.map(i=>{let l=i.variantImages;return{stock:i.stock,price:i.price,colorId:i.colorId,image:l[0].link,images:l}})};t.variants=this.typology?[t.variants[0]]:t.variants,console.log(t),this.loading=!0,this.edit?this.update(t):this.http.createProduct(t).subscribe({next:i=>{console.log(i),this.router.navigate(["dashboard/products"]),this.loading=!1},error:i=>{this.errorServ.addError(b(i)),this.loading=!1}})}}uploadMulti(n){this.progress=0;let e=n.length;var t=n.map(i=>({link:"",public_id:void 0}));n.forEach((i,l)=>{var _=0;this.cloudy.uploadFile(i).subscribe(w=>{if(w.type===G.UploadProgress&&w.total)this.progress=this.progress-_,_=Math.round(w.loaded/w.total*100/e),this.progress+=_,this.cdr.detectChanges();else if(w.type===G.Response){console.log("\u2705 Subida completa:",w.body);let N=w.body,pe=N.secure_url.replace("/upload/","/upload/q_auto,f_auto/");if(this.progress=this.progress-_,_=Math.round(100/e),this.progress+=_,t[l]={link:pe,public_id:N.public_id},this.progress===100){var V=this.variants.controls[this.currentVariant].get("variantImages")?.value;V=n.length+V.length>5&&n.length<5?V.slice(V.length-(5-n.length),void 0):n.length==5?[]:V,V.push(...t),this.variants.controls[this.currentVariant].get("variantImages")?.patchValue(V),this.variantPreviews[this.currentVariant]=V.map(A=>typeof A=="string"?A:A.link),setTimeout(()=>{this.progress=-1,this.cdr.detectChanges()},3e3)}this.cdr.detectChanges()}})})}upload(n,e){this.progress=0,this.cloudy.uploadFile(n).subscribe(t=>{if(t.type===G.UploadProgress&&t.total)this.progress=Math.round(t.loaded/t.total*100),this.cdr.detectChanges();else if(t.type===G.Response){console.log("\u2705 Subida completa:",t.body);let i=t.body,l=i.secure_url.replace("/upload/","/upload/q_auto,f_auto/");switch(this.progress=100,this.imagePreview[e]=l,e){case 0:this.createProductForm.get("vector")?.setValue({vector:l,vPublicId:i.public_id});break;case 1:this.createFinish.get("image")?.setValue({image:l,public_id:i.public_id});break;case 2:this.createColor.get("image")?.setValue({image:l,public_id:i.public_id})}setTimeout(()=>{this.progress=-1,this.cdr.detectChanges()},3e3),this.cdr.detectChanges()}})}onCreateFinish(){if(this.createFinish.valid){let n=this.createFinish.get("image")?.value,e={text:this.createFinish.get("name")?.value,image:n.image,public_id:n.public_id};this.http.createFinish(e).subscribe({next:t=>{console.log(t),this.closeDialog(),this.cdr.detectChanges(),this.chargeComponentData()},error:t=>{this.errorServ.addError(b(t))}})}}deleteFinish(n){this.http.deleteFinish(n).subscribe({next:e=>{console.log(e),this.closeDialog(),this.chargeComponentData(),this.cdr.detectChanges()},error:e=>{this.errorServ.addError(b(e)),this.closeDialog(),this.cdr.detectChanges()}})}deleteColor(n){this.http.deleteColor(n).subscribe({next:e=>{console.log(e),this.closeDialog(),this.chargeComponentData(),this.cdr.detectChanges()},error:e=>{this.errorServ.addError(b(e)),this.closeDialog(),this.cdr.detectChanges()}})}onCreateColor(){if(this.createColor.valid){let n={name:this.createColor.get("name")?.value,image:this.createColor.get("image")?.value?.image,public_id:this.createColor.get("image")?.value?.public_id};this.http.createColor(n).subscribe({next:e=>{console.log(e),this.closeDialog(),this.cdr.detectChanges(),this.chargeComponentData()},error:e=>this.errorServ.addError(b(e))})}}removeFinish(n){this.finishes=this.finishes.filter(e=>e.id!=n)}addFinish(n){this.finishes.push(n);var e=this.createProductForm.get("finishesId")?.value;e.push(n.id),this.createProductForm.get("finishesId")?.patchValue(e),this.closeDialog()}onSelectColor(n){this.color[this.currentVariant]=n,this.variants.controls[this.currentVariant].get("colorId")?.setValue(n.id),this.closeDialog(),this.showDialog=0,this.cdr.detectChanges()}cancel(){this.router.navigate(["dashboard/products"])}update(n){this.http.updateProduct(this.editProduct.id,n).subscribe({next:e=>{console.log(e),this.loading=!1,this.router.navigate(["dashboard/products"])},error:e=>{this.errorServ.addError(b(e)),console.log(e),this.loading=!1,this.cdr.detectChanges()}})}showErrors(){return this.createProductForm.errors}static \u0275fac=function(e){return new(e||a)(E(B),E(oe),E(q),E(j),E($),E(le),E(U))};static \u0275cmp=R({type:a,selectors:[["app-create-product"]],viewQuery:function(e,t){if(e&1&&(O(ue,5),O(me,5),O(ge,5),O(_e,5)),e&2){let i;D(i=I())&&(t.fileInput=i.first),D(i=I())&&(t.fileInputVariants=i.first),D(i=I())&&(t.finishInput=i.first),D(i=I())&&(t.colorInput=i.first)}},decls:118,vars:27,consts:[["fileInput",""],["fileInputVariants",""],["finish",""],["color",""],[1,"main-create"],[1,"loader-wrapper"],[1,"create-product-container"],[1,"create-header"],[1,"line"],[1,"create-form",3,"ngSubmit","formGroup"],[1,"form-text"],["for","name"],[1,"input-base"],["id","name","formControlName","name","type","text"],["for","subtitle"],["id","subtitle","formControlName","subtitle","type","text"],["for","description"],[1,"desc"],["id","description","formControlName","description","maxlength","500",1,"description"],[1,"word-count"],[1,"finishes"],[1,"input-base","add-finish",3,"click"],[2,"flex","1"],["src","chevron-down.svg","alt",""],[1,"dialog"],[1,"labels"],["for","vector"],[1,"drag-n-drop"],[1,"vcontainer"],[1,"input-base","dragndrop",3,"dragover","dragleave","drop","click","ngClass"],["type","file","accept","image/*",2,"display","none",3,"change"],[1,"upload"],["src","upload-cloud.svg","alt",""],[1,"info-upload"],[1,"upload-text"],[1,"input-base","propierty"],["for","details"],["id","details","formControlName","details","maxlength","80",1,"description"],[1,"radio"],[1,"radio-option-container"],[1,"radio-option",3,"click","ngClass"],[1,"selected-circle"],[1,"radio-label"],["formArrayName","variants",1,"varaints-container"],[1,"variant-tab"],["type","submit",1,"button-base",3,"disabled"],[1,"button-chips",3,"click"],[3,"submit","formGroup"],[1,"overlay"],[1,"upload-progress"],[1,"dialog",3,"click"],[1,"dialog-item"],[1,"dialog-item",3,"click"],["alt","",1,"icon-preview",3,"src"],["src","plus-circle.svg","alt",""],[1,"avatar"],["alt","item.text",3,"src"],["src","divide-circle.svg",3,"click"],[1,"finish-data"],["alt","",3,"src"],["src","divide-circle.svg","alt","delete",3,"click"],[1,"tabs"],[1,"tab"],[1,"tab-line"],[1,"button-light",3,"click"],["src","plus-green.svg","alt",""],[1,"tab",3,"click"],[1,"selected-tab"],[1,"variant-item",3,"formGroupName"],[1,"default-variant"],["for","price"],["id","price","formControlName","price","type","number"],["for","stock"],[1,"count"],[1,"count-btn",3,"click"],["src","/minus.svg","alt","minus"],["formControlName","stock","type","number","min","0",1,"prod-count"],["src","/plus-black.svg","alt","plus"],[1,"variant-images"],["type","file","accept","image/*","multiple","","maxlength","5",2,"display","none",3,"change"],[1,"imges-container"],[1,"images"],[1,"togle",3,"click","ngClass"],[1,"switch",3,"ngClass"],["src","Button.svg","alt",""],[1,"label"],["src","divide-circle.svg","alt","delete"],["alt","preview",1,"icon-preview",3,"src"],[1,"overlay",3,"click"],[1,"creation-dialog",3,"click"],[1,"input-container"],[1,"form-label"],[1,"input-content"],["type","text","formControlName","name"],[1,"upload-img-prop"],[1,"input-base","dragndrop","add-prop",3,"dragover","dragleave","drop","click","ngClass"],[1,"creat-actions"],[1,"button-chips",2,"flex","1",3,"click"],[2,"font-size","16px","line-height","24px"],["type","submit",1,"button-base",2,"flex","1","padding","10px 18px"]],template:function(e,t){if(e&1){let i=C();r(0,"div",4),v(1,he,2,0,"div",5),r(2,"h1"),s(3,"Productos"),o(),r(4,"div",6)(5,"header",7)(6,"h2"),s(7," Informaci\xF3n del producto "),o(),r(8,"p"),s(9," Update your photo and personal details here. "),o(),r(10,"p"),s(11),o(),m(12,"div",8),o(),r(13,"form",9),g("ngSubmit",function(){return d(i),p(t.onSubmit())}),r(14,"div",10)(15,"label",11),s(16,"Nombre del producto"),o(),r(17,"div",12),m(18,"input",13),o(),m(19,"div",8),o(),r(20,"div",10)(21,"label",14),s(22,"Subt\xEDtulo"),o(),r(23,"div",12),m(24,"input",15),o(),m(25,"div",8),o(),r(26,"div",10)(27,"label",16),s(28,"Descripci\xF3n"),o(),r(29,"div",17)(30,"div",12),m(31,"textarea",18),o(),r(32,"p",19),s(33),o()(),m(34,"div",8),o(),r(35,"div",10)(36,"label",14),s(37,"Categor\xEDa"),o(),r(38,"div",20)(39,"div",21),g("click",function(){return d(i),p(t.openFinishModal(1))}),r(40,"label",22),s(41),o(),m(42,"img",23),v(43,ve,3,0,"div",24),o()(),m(44,"div",8),o(),r(45,"div",10)(46,"div",25)(47,"label",26),s(48,"\xCDcono representativo"),o(),r(49,"p"),s(50,"Comparte un \xEDcono que sintetice su producto."),o()(),r(51,"div",27),v(52,xe,2,1,"div",28),r(53,"div",29),g("dragover",function(_){return d(i),p(t.onDragOver(_))})("dragleave",function(_){return d(i),p(t.onDragLeave(_,0))})("drop",function(_){return d(i),p(t.onDrop(_,0))})("click",function(_){return d(i),p(t.onFilesSelected(_,0))}),r(54,"input",30,0),g("change",function(_){return d(i),p(t.onFileChange(_,0))}),o(),r(56,"div",31),m(57,"img",32),o(),r(58,"div",33)(59,"p")(60,"span",34),s(61,"Haga clic para cargar"),o(),s(62," o arrastrar y soltar "),o(),r(63,"p"),s(64,"SVG, PNG, JPG or GIF"),o()()()(),m(65,"div",8),o(),r(66,"div",10)(67,"label",14),s(68,"Acabados"),o(),r(69,"div",20)(70,"div",21),g("click",function(){return d(i),p(t.openFinishModal(2))}),r(71,"label",22),s(72," Selecciona los materiales del producto "),o(),m(73,"img",23),v(74,be,7,0,"div",24),o(),F(75,Pe,7,2,"div",35,S),o(),m(77,"div",8),o(),r(78,"div",10)(79,"label",36),s(80,"Sistema el\xE9ctrico"),o(),r(81,"div",17)(82,"div",12),m(83,"textarea",37),o(),r(84,"p",19),s(85),o()(),m(86,"div",8),o(),r(87,"div",10)(88,"label",11),s(89,"Tipolog\xEDa"),o(),r(90,"div",38)(91,"div",39)(92,"div",40),g("click",function(){return d(i),p(t.onTypologyChange(!0))}),v(93,ye,1,0,"div",41),o(),r(94,"p",42),s(95,"Simple"),o()(),r(96,"div",39)(97,"div",40),g("click",function(){return d(i),p(t.onTypologyChange(!1))}),v(98,we,1,0,"div",41),o(),r(99,"p",42),s(100,"Variable"),o()()(),m(101,"div",8),o(),r(102,"div",43),v(103,Se,9,0,"div",44),F(104,Ie,1,1,null,null,S),o(),r(106,"footer")(107,"button",45)(108,"label"),s(109," Guardar "),o()(),r(110,"button",46),g("click",function(){return d(i),p(t.cancel())}),r(111,"label"),s(112," Cancelar "),o()()()(),r(113,"form",47),g("submit",function(){return d(i),p(t.onCreateFinish())}),v(114,ze,33,4,"div",48),o(),r(115,"form",47),g("submit",function(){return d(i),p(t.onCreateColor())}),v(116,Ne,33,4,"div",48),o()(),v(117,Re,3,1,"div",49),o()}e&2&&(c(),x(t.loading?1:-1),c(10),M("Errores: ",t.showErrors()),c(2),h("formGroup",t.createProductForm),c(20),M("",t.createProductForm.value.description.length,"/500"),c(8),M(" ",t.getCategory()," "),c(2),x(t.showDialog===1?43:-1),c(9),x(t.canPreview(0)?52:-1),c(),h("ngClass",y(21,z,t.isHovering)),c(21),x(t.showDialog===2?74:-1),c(),k(t.finishes),c(10),M("",t.createProductForm.value.details.length,"/80"),c(7),h("ngClass",y(23,se,t.typology===!0)),c(),x(t.typology===!0?93:-1),c(4),h("ngClass",y(25,se,t.typology===!1)),c(),x(t.typology===!1?98:-1),c(5),x(t.typology?-1:103),c(),k(t.variants.controls),c(3),h("disabled",!t.createProductForm.valid),c(6),h("formGroup",t.createFinish),c(),x(t.showDialog==4?114:-1),c(),h("formGroup",t.createColor),c(),x(t.showDialog==5?116:-1),c(),x(t.progress>-1?117:-1))},dependencies:[ae,K,W,Y,J,X,re,ne,Z,ie,ee,te,L,H,Q],styles:[".main-create[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px;justify-content:center;width:100%;padding-inline:32px;box-sizing:border-box}h1[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:30px;font-style:normal;font-weight:600;line-height:38px;margin:0}.create-product-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24PX;padding-inline:32px;box-sizing:border-box}.create-header[_ngcontent-%COMP%]{margin:0 0 20px;position:relative}.line[_ngcontent-%COMP%]{position:absolute;width:100%;bottom:-20px;height:1px;align-self:stretch;background:var(--Gray-200, #E9EAEB)}.create-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px}.create-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:400;line-height:20px}.form-text[_ngcontent-%COMP%]{display:flex;gap:32px;position:relative;margin-bottom:20px}.form-text[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:360px;color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:600;line-height:20px}.input-base[_ngcontent-%COMP%]{width:512px;box-sizing:border-box}.create-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}textarea[_ngcontent-%COMP%]{field-sizing:content;resize:none}.desc[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.word-count[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:400;line-height:20px;margin:0}.labels[_ngcontent-%COMP%]{width:360px}.labels[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:400;line-height:20px;margin:0}.drag-n-drop[_ngcontent-%COMP%]{display:flex;gap:20px}.vcontainer[_ngcontent-%COMP%]{display:flex;width:84px;height:84px;padding:18.375px 9.188px 18.375px 18.375px;flex-direction:column;align-items:flex-start;gap:13.125px;flex-shrink:0;border-radius:262.5px;border:.656px solid #616060;box-sizing:border-box;overflow:hidden}.upload[_ngcontent-%COMP%]{display:flex;width:40px;height:40px;padding:10px;justify-content:center;align-items:center;border-radius:28px;border:6px solid var(--Gray-50, #FAFAFA);background:var(--Gray-100, #F5F5F5);box-sizing:border-box}.input-base[_ngcontent-%COMP%]{position:relative}.input-base.dragndrop[_ngcontent-%COMP%]{flex-direction:column;align-items:center;gap:12px;padding:16px}.input-base.dragndrop.hover[_ngcontent-%COMP%]{border:1px solid var(--Gray-300, lightblue);background:var(--White, #FFF);box-shadow:0 1px 2px #00f}.upload-text[_ngcontent-%COMP%]{color:var(--Brand-700, #007981);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:600;line-height:20px;margin:0}.info-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.info-upload[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:400;line-height:20px;margin:0;text-align:center}.icon-preview[_ngcontent-%COMP%]{height:54px}.radio[_ngcontent-%COMP%]{display:flex;gap:54px}.radio-label[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:500;line-height:24px;margin:0}.radio-option[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:20px;height:20px;border-radius:50%;border:1px solid var(--Gray-300, #D5D7DA);background-color:var(--White, #FFF)}.radio-option.selected[_ngcontent-%COMP%]{background-color:#f0feff;border:1px solid #178C94}.selected-circle[_ngcontent-%COMP%]{width:8px;height:8px;flex-shrink:0;border-radius:50%;background-color:var(--Brand-600, #178C94)}.radio-option-container[_ngcontent-%COMP%]{display:flex;gap:12px}.variant-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.count[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;height:40px;width:auto;border-radius:8px;border:1px solid var(--Gray-300, #D5D7DA);box-shadow:0 1px 2px #0a0d120d;overflow:hidden;background-color:#fff}.count[_ngcontent-%COMP%]   .count-btn[_ngcontent-%COMP%]{background:none;border:none;width:40px;padding:10px;box-sizing:border-box;cursor:pointer}.prod-count[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:96px;text-align:center;font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:500;line-height:24px;border-inline:1px solid var(--Gray-300, #D5D7DA);box-sizing:border-box}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.variant-images[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;width:512px}.imges-container[_ngcontent-%COMP%]{height:96.2px;display:flex;align-items:center;gap:7.738px;align-self:stretch;border-radius:8px;overflow:hidden;width:512}.images[_ngcontent-%COMP%]{height:100%;width:96.2px;overflow:hidden}.images[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.variant-tab[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:32px}.tabs[_ngcontent-%COMP%]{display:flex;gap:16px;position:relative}.tab[_ngcontent-%COMP%]{display:flex;padding:0 4px 16px;justify-content:center;gap:8px;position:relative;width:76px;cursor:pointer}.tab[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Brand-700, #007981);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:600;line-height:20px;margin:0;width:76px}.selected-tab[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:2px;align-self:stretch;justify-content:space-between;background:var(--Brand-700, #007981)}.tab-line[_ngcontent-%COMP%]{position:absolute;bottom:0;width:100%;height:1px;flex-shrink:0;background:var(--Gray-200, #E9EAEB)}.default-variant[_ngcontent-%COMP%]{display:flex;gap:8px}.togle[_ngcontent-%COMP%]{display:flex;width:36px;height:20px;align-items:center;justify-content:center;border-radius:12px;border:2px solid #178C94;box-sizing:border-box;overflow:hidden;cursor:pointer;background-color:#178c94;transition:background-color .3s ease-in-out}.back[_ngcontent-%COMP%]{display:flex;align-items:center;height:100%;width:100%;justify-content:center;border-radius:12px;box-sizing:border-box;overflow:hidden;background-color:#fff}.switch[_ngcontent-%COMP%]{display:flex;width:36px;height:20px;justify-content:flex-end;align-items:center;margin-right:-2px;border-radius:12px;box-sizing:border-box;background-color:#178c94;transition:transform .3s ease-in-out}.switch.non-active[_ngcontent-%COMP%]{transform:translate(-48%)}.togle.non-active[_ngcontent-%COMP%]{background-color:#fff}.default-variant[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px;margin:0}.default-variant[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:400;line-height:20px}footer[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;gap:12px}.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.dialog[_ngcontent-%COMP%]{position:absolute;z-index:3;left:0;top:100%;display:flex;flex-direction:column;width:100%;align-items:flex-start;border-radius:8px;border:1px solid var(--Gray-200, #E9EAEB);background:var(--White, #FFF);box-shadow:0 12px 16px -4px #0a0d1214,0 4px 6px -2px #0a0d1208}.dialog-item[_ngcontent-%COMP%]{display:flex;padding:10px 14px;gap:16px;align-items:center;width:100%;box-sizing:border-box}.dialog-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;flex:1;color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px;margin:0;cursor:pointer}.creation-dialog[_ngcontent-%COMP%]{display:flex;width:400px;padding:24px;flex-direction:column;align-items:center;gap:8px;border-radius:12px;background:var(--White, #FFF);box-shadow:0 20px 24px -4px #0a0d1214,0 8px 8px -4px #0a0d1208;box-sizing:border-box}.creation-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);text-align:center;font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px;margin:0}.creation-dialog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px;width:100%;margin:0}.input-container[_ngcontent-%COMP%]{width:100%}.input-base.dragndrop.add-prop[_ngcontent-%COMP%]{width:190px}.upload-img-prop[_ngcontent-%COMP%]{display:flex;width:100%}.creat-actions[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;width:100%}.avatar[_ngcontent-%COMP%]{display:flex;width:28px;height:28px;flex-direction:column;justify-content:center;align-items:center;border-radius:50%;overflow:hidden}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:100%}.input-base.propierty[_ngcontent-%COMP%]{border-color:#279ea8}.finishes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.finish-data[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex:1}.finish-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px}.upload-progress[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;box-sizing:border-box;padding:20px;border-radius:50%;position:fixed;width:100px;height:100px;bottom:32px;right:32px;background-color:#007981;opacity:.5}.upload-progress[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--White, #FFF);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:600;line-height:24px}.input-base.add-finish[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Gray-700, #414651);font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px}"]})};export{de as CreateProduct};
