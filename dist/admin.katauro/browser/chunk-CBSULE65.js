import{a as R}from"./chunk-WGE3CKVK.js";import{$ as w,E as d,F as p,G as v,H as C,I as h,J as u,K as i,L as o,M as s,N as y,O as _,P as l,U as c,V as g,W as F,Y as M,Z as O,_ as k,da as T,fa as I,ga as D,ha as A,m as b,ma as $,n as P,oa as B,t as S,u as a,w as f,x as E}from"./chunk-XAC6VWD2.js";var z=()=>["Nombre","Categor\xEDa","Precio","Stock","Tipolog\xEDa","Estado",""],G=t=>({active:t});function L(t,r){if(t&1){let e=y();i(0,"div",3)(1,"label"),c(2),o(),i(3,"img",23),_("click",function(){let m=b(e).$index,x=l();return P(x.onDeleteFilter(m))}),o()()}if(t&2){let e=r.$implicit;a(2),F(" ",e," ")}}function N(t,r){if(t&1&&(i(0,"p"),c(1),o()),t&2){let e=l().$implicit;a(),g(e.name)}}function V(t,r){if(t&1&&(i(0,"div",24)(1,"p"),c(2),o()()),t&2){let e=l().$implicit;a(2),g(e.category.nombre)}}function q(t,r){if(t&1&&(i(0,"p"),c(1),k(2,"currency"),o()),t&2){let e=l().$implicit;a(),g(w(2,1,e.variants[0].price,"USD","symbol","1.2-2"))}}function U(t,r){if(t&1&&(i(0,"p"),c(1),o()),t&2){let e=l().$implicit,n=l(2);a(),g(n.getStock(e))}}function H(t,r){if(t&1&&(i(0,"p"),c(1),o()),t&2){let e=l().$implicit;a(),g(e.typology)}}function W(t,r){t&1&&(i(0,"div",25),s(1,"img",27),i(2,"p"),c(3),o()()),t&2&&(a(),u("src","./_Dot_green.svg",S),a(2),g("Activo"))}function J(t,r){if(t&1){let e=y();i(0,"div",26)(1,"button",28),s(2,"img",29),o(),i(3,"button",30),_("click",function(){b(e);let m=l().$implicit,x=l(2);return P(x.delete(m.id))}),s(4,"img",31),o(),i(5,"button",28),s(6,"img",32),o()()}}function K(t,r){if(t&1&&(i(0,"div",17),d(1,N,2,1,"p"),d(2,V,3,1,"div",24),d(3,q,3,6,"p"),d(4,U,2,1,"p"),d(5,H,2,1,"p"),d(6,W,4,2,"div",25),d(7,J,7,0,"div",26),o()),t&2){let e=l().$implicit;u("className",`product-item ${e===""?"action":e.toLowerCase()}`),a(),p(e==="Nombre"?1:-1),a(),p(e==="Categor\xEDa"?2:-1),a(),p(e==="Precio"?3:-1),a(),p(e==="Stock"?4:-1),a(),p(e==="Tipolog\xEDa"?5:-1),a(),p(e==="Estado"?6:-1),a(),p(e===""?7:-1)}}function Q(t,r){if(t&1&&(i(0,"div",17)(1,"div",17)(2,"p"),c(3),o()(),C(4,K,8,8,"div",17,v),o()),t&2){let e=r.$implicit,n=l();u("className",`column ${e===""?"action":e.toLowerCase()}`),a(),u("className",`head-bar-item ${e===""?"action":e.toLowerCase()}`),a(2),g(e),a(),h(n.products)}}function X(t,r){t&1&&(i(0,"div",33)(1,"label"),c(2,"..."),o()())}function Y(t,r){t&1&&(i(0,"div",33)(1,"label"),c(2,"..."),o()())}function Z(t,r){if(t&1){let e=y();d(0,X,3,0,"div",33),i(1,"div",34),_("click",function(){let m=b(e).$implicit,x=l();return P(x.onPageChange(m))}),i(2,"label"),c(3),o()(),d(4,Y,3,0,"div",33)}if(t&2){let e=r.$implicit,n=l();p(e===n.pages&&n.currentPage-n.pages>2?0:-1),a(),u("ngClass",O(4,G,n.currentPage==e)),a(2),g(e),a(),p(n.currentPage>3&&e+2==n.currentPage?4:-1)}}var j=class t{constructor(r,e,n,m){this.router=r;this.route=e;this.http=n;this.cdr=m}count=0;products=[];pagesArray=[1];pages=1;currentPage=1;CatParser=["Luminarias de pie","Bombillo","Luminarias de techo","Luminarias de mesa","Luminarias de pared"];CategoryFilter=[];queryParamSubs;ngOnInit(){this.queryParamSubs=this.route.queryParamMap.subscribe(()=>{this.ReadData()})}ReadData(){let r=this.route.snapshot.queryParamMap.get("categories");r&&(this.CategoryFilter=[],r.split("-").map(n=>this.CategoryFilter.push(this.CatParser[+n<5&&0<=+n?+n:1]))),this.http.getProducts().subscribe({next:e=>{this.products=e,console.log(e),this.cdr.detectChanges()},error:e=>console.log(e)})}getStock(r){return r.variants.reduce((e,n)=>e+n.stock,0)}onPageChange(r){this.currentPage=r,console.log(r)}onDeleteFilter(r){this.CategoryFilter.splice(r,1),this.router.navigate([],{queryParams:{categories:this.CategoryFilter.map(e=>this.CatParser.indexOf(e)).join("-")},queryParamsHandling:"merge"})}delete(r){this.http.deleteProduct(r).subscribe({next:e=>{console.log(e),this.ReadData(),this.cdr.detectChanges()},error:e=>console.log(e)})}static \u0275fac=function(e){return new(e||t)(f(B),f($),f(R),f(T))};static \u0275cmp=E({type:t,selectors:[["app-products"]],decls:46,vars:4,consts:[[1,"products-main"],[1,"prod-header"],[1,"prod-actions"],[1,"button-chips"],["src","upload-cloud.svg","alt",""],[1,"button-base",3,"click"],["src","plus.svg","alt",""],[1,"filters"],["src","Filters lines.svg","alt",""],[1,"spacing",2,"flex","1"],[1,"input-base"],["src","search.svg","alt",""],["type","text","placeholder","Buscar"],[1,"prod-container"],[1,"product-list-header"],[1,"count"],[1,"head-bar"],[3,"className"],[1,"pagination"],[1,"button-chips",3,"click","disabled"],["src","arrow-left.svg","alt",""],[1,"pages"],["src","arrow-right.svg","alt",""],["src","x.svg","alt","",3,"click"],[1,"category"],[1,"status"],[1,"actions"],["alt","",3,"src"],[1,"action-button"],["src","copy.svg","alt",""],[1,"action-button",3,"click"],["src","trash-2.svg","alt",""],["src","edit-2.svg","alt",""],[1,"page"],[1,"page",3,"click","ngClass"]],template:function(e,n){e&1&&(i(0,"div",0)(1,"header",1)(2,"h1"),c(3,"Productos"),o(),i(4,"div",2)(5,"button",3),s(6,"img",4),i(7,"label"),c(8," Importar "),o()(),i(9,"button",5),_("click",function(){return n.router.navigate(["dashboard/create-product"])}),s(10,"img",6),i(11,"label"),c(12," Agregar Producto "),o()()()(),i(13,"div",7),C(14,L,4,1,"div",3,v),i(16,"button",3),s(17,"img",8),i(18,"label"),c(19,"Filtros"),o()(),s(20,"div",9),i(21,"div",10),s(22,"img",11)(23,"input",12),o()(),i(24,"div",13)(25,"header",14)(26,"h2"),c(27,"Mis productos"),o(),i(28,"div",15)(29,"p"),c(30),o()()(),i(31,"div",16),C(32,Q,6,3,"div",17,v),o(),i(34,"div",18)(35,"button",19),_("click",function(){return n.onPageChange(n.currentPage-1)}),s(36,"img",20),i(37,"label"),c(38,"Anterior"),o()(),i(39,"div",21),C(40,Z,5,6,null,null,v),o(),i(42,"button",19),_("click",function(){return n.onPageChange(n.currentPage-1)}),i(43,"label"),c(44,"Siguiente"),o(),s(45,"img",22),o()()()()),e&2&&(a(14),h(n.CategoryFilter),a(16),F("",n.count," productos"),a(2),h(M(3,z)),a(3),u("disabled",n.currentPage===1),a(5),h(n.pagesArray),a(2),u("disabled",n.currentPage===n.pages))},dependencies:[A,I,D],styles:[".products-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.prod-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-inline:32px}.prod-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}h1[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:30px;font-style:normal;font-weight:600;line-height:38px;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;padding-inline:32px}.product-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px 24px;gap:8px}.product-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:500;line-height:28px;margin:0}.product-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Brand-700, #007981);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.prod-container[_ngcontent-%COMP%]{margin-inline:32px;display:flex;flex-direction:column;align-items:flex-start;align-self:stretch;border-radius:12px;border:1px solid var(--Gray-200, #E9EAEB);background:var(--White, #FFF);box-shadow:0 1px 3px #0a0d121a,0 1px 2px #0a0d120f}.count[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Brand-50, #F0FEFF)}.head-bar[_ngcontent-%COMP%]{display:flex;align-items:flex-start;align-self:stretch}.head-bar-item[_ngcontent-%COMP%]{display:flex;flex:1;height:44px;padding:12px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);background:var(--Gray-50, #FAFAFA);box-sizing:border-box}.head-bar-item.action[_ngcontent-%COMP%]{min-height:44px}.head-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.column.nombre[_ngcontent-%COMP%]{min-width:312px}.column.action[_ngcontent-%COMP%]{flex:none;width:160px}.column.categor\\ed a[_ngcontent-%COMP%]{width:225px;flex:none}.product-item[_ngcontent-%COMP%]{display:flex;height:72px;padding:16px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);box-sizing:border-box}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.action-button[_ngcontent-%COMP%]{border:none;background:none;padding:10px;border-radius:8px;cursor:pointer}.status[_ngcontent-%COMP%]{display:flex;padding:2px 8px 2px 6px;justify-content:center;align-items:center;gap:6px;border-radius:16px;background:var(--Success-50, #ECFDF3)}.category[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Gray-100, #F5F5F5)}.status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Success-700, #027A48);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px}.pagination[_ngcontent-%COMP%]{display:flex;padding:12px 24px 16px;justify-content:space-between;align-items:center;align-self:stretch;border:0 solid var(--Gray-200, #E9EAEB)}.pages[_ngcontent-%COMP%]{display:flex}.page[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;box-sizing:border-box;padding:12px}.page[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Gray-500, #717680);text-align:center;font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px}.page.active[_ngcontent-%COMP%]{background:#f0feff}.page.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Brand-900, #175659)}"]})};export{j as Products};
