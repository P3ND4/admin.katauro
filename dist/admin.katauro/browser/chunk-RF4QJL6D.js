import"./chunk-BYXBJQAS.js";import{a as N}from"./chunk-PWHX2Y3D.js";import{B as D,E as p,F as m,G as h,H as P,I as y,J as _,K as r,L as a,M as u,N as f,O as b,P as T,Q as E,R as x,S as O,T as l,Y as c,Z as d,_ as S,aa as I,ba as A,da as B,fa as $,ja as z,la as V,m as v,ma as j,n as C,na as G,sa as R,t as k,u as o,ua as L,w as F,x as M}from"./chunk-UH377LGR.js";var w=class t{data;acept=new D(!1);onAction(n){this.acept.emit(n)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=M({type:t,selectors:[["app-message-box"]],inputs:{data:"data"},outputs:{acept:"acept"},decls:16,vars:2,consts:[[1,"message-main"],[1,"message"],[1,"icon"],["src","alert-circle.svg","alt",""],[1,"txt"],[1,"actions"],[1,"cancel",3,"click"],[1,"accept",3,"click"]],template:function(e,i){e&1&&(f(0,"div",0)(1,"div",1)(2,"div",2),T(3,"img",3),b(),f(4,"div",4)(5,"h2"),c(6),b(),f(7,"p"),c(8),b()()(),f(9,"div",5)(10,"div",6),O("click",function(){return i.onAction(!1)}),f(11,"span"),c(12,"Cancelar"),b()(),f(13,"div",7),O("click",function(){return i.onAction(!0)}),f(14,"span"),c(15,"Eliminar"),b()()()()),e&2&&(o(6),d(i.data==null?null:i.data.msg),o(2),d(i.data==null?null:i.data.warn))},styles:[".message-main[_ngcontent-%COMP%]{display:flex;width:400px;padding:24px;flex-direction:column;align-items:center;gap:32px;border-radius:12px;background:var(--White, #FFF);box-shadow:0 20px 24px -4px #0a0d1214,0 8px 8px -4px #0a0d1208}.message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px;align-self:stretch}.icon[_ngcontent-%COMP%]{display:flex;padding:12px;justify-content:center;align-items:center;border-radius:50%;border:8px solid var(--Error-50, #FEF3F2);background:var(--Error-100, #FEE4E2)}.txt[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;align-self:stretch}.txt[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);text-align:center;font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:600;line-height:28px;margin:0}.txt[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);text-align:center;font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:400;line-height:20px;margin:0}.cancel[_ngcontent-%COMP%]{display:flex;padding:10px 18px;justify-content:center;align-items:center;gap:8px;flex:1 0 0;box-sizing:border-box;border-radius:8px;border:1px solid var(--Gray-300, #D5D7DA);background:var(--White, #FFF);box-shadow:0 1px 2px #0a0d120d;cursor:pointer}.accept[_ngcontent-%COMP%]{display:flex;padding:10px 18px;justify-content:center;align-items:center;gap:8px;flex:1 0 0;border-radius:8px;border:1px solid var(--Error-600, #D92D20);background:var(--Error-600, #D92D20);box-shadow:0 1px 2px #0a0d120d;cursor:pointer}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:12px;align-self:stretch}.accept[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .cancel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:600;line-height:24px}.accept[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--White, #FFF)}.cancel[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:var(--Gray-700, #414651)}"]})};var U=()=>["Nombre","Categor\xEDa","Precio","Stock","Tipolog\xEDa","Estado",""],J=t=>({active:t});function K(t,n){if(t&1){let e=E();r(0,"div",1)(1,"app-message-box",27),x("acept",function(s){v(e);let g=l();return C(g.onDecide(s.valueOf()))}),a()()}if(t&2){let e=l();o(),_("data",e.warn)}}function Q(t,n){if(t&1){let e=E();r(0,"div",4)(1,"label"),c(2),a(),r(3,"img",28),x("click",function(){let s=v(e).$index,g=l();return C(g.onDeleteFilter(s))}),a()()}if(t&2){let e=n.$implicit;o(2),S(" ",e," ")}}function X(t,n){if(t&1){let e=E();r(0,"div",30),x("click",function(){let s=v(e).$implicit,g=l(2);return C(g.onAddFilter(s))}),r(1,"p"),c(2),a()()}if(t&2){let e=n.$implicit;o(2),d(e)}}function Y(t,n){if(t&1&&(r(0,"div",12),P(1,X,3,1,"div",29,h),a()),t&2){let e=l();o(),y(e.CatParser)}}function Z(t,n){if(t&1&&(r(0,"p"),c(1),a()),t&2){let e=l().$implicit;o(),d(e.name)}}function ee(t,n){if(t&1&&(r(0,"div",31)(1,"p"),c(2),a()()),t&2){let e=l().$implicit;o(2),d(e.category.nombre)}}function te(t,n){if(t&1&&(r(0,"p"),c(1),B(2,"currency"),a()),t&2){let e=l().$implicit;o(),d(e.variants.length==0?"":$(2,1,e.variants[0].price,"USD","symbol","1.2-2"))}}function ne(t,n){if(t&1&&(r(0,"p"),c(1),a()),t&2){let e=l().$implicit,i=l(2);o(),d(i.getStock(e))}}function ie(t,n){if(t&1&&(r(0,"p"),c(1),a()),t&2){let e=l().$implicit;o(),d(e.typology)}}function re(t,n){t&1&&(r(0,"div",32),u(1,"img",34),r(2,"p"),c(3),a()()),t&2&&(o(),_("src","./_Dot_green.svg",k),o(2),d("Activo"))}function oe(t,n){if(t&1){let e=E();r(0,"div",33)(1,"button",35),x("click",function(){v(e);let s=l().$implicit,g=l(2);return C(g.ask(s))}),u(2,"img",36),a(),r(3,"button",35),x("click",function(){v(e);let s=l().$implicit,g=l(2);return C(g.edit(s.id))}),u(4,"img",37),a()()}}function ae(t,n){if(t&1&&(r(0,"div",21),p(1,Z,2,1,"p"),p(2,ee,3,1,"div",31),p(3,te,3,6,"p"),p(4,ne,2,1,"p"),p(5,ie,2,1,"p"),p(6,re,4,2,"div",32),p(7,oe,5,0,"div",33),a()),t&2){let e=l().$implicit;_("className",`product-item ${e===""?"action":e.toLowerCase()}`),o(),m(e==="Nombre"?1:-1),o(),m(e==="Categor\xEDa"?2:-1),o(),m(e==="Precio"?3:-1),o(),m(e==="Stock"?4:-1),o(),m(e==="Tipolog\xEDa"?5:-1),o(),m(e==="Estado"?6:-1),o(),m(e===""?7:-1)}}function ce(t,n){if(t&1&&(r(0,"div",21)(1,"div",21)(2,"p"),c(3),a()(),P(4,ae,8,8,"div",21,h),a()),t&2){let e=n.$implicit,i=l();_("className",`column ${e===""?"action":e.toLowerCase()}`),o(),_("className",`head-bar-item ${e===""?"action":e.toLowerCase()}`),o(2),d(e),o(),y(i.products)}}function le(t,n){t&1&&(r(0,"div",38)(1,"label"),c(2,"..."),a()())}function se(t,n){t&1&&(r(0,"div",38)(1,"label"),c(2,"..."),a()())}function de(t,n){if(t&1){let e=E();p(0,le,3,0,"div",38),r(1,"div",39),x("click",function(){let s=v(e).$implicit,g=l();return C(g.onPageChange(s))}),r(2,"label"),c(3),a()(),p(4,se,3,0,"div",38)}if(t&2){let e=n.$implicit,i=l();m(e===i.pages&&i.currentPage-i.pages>2?0:-1),o(),_("ngClass",A(4,J,i.currentPage==e)),o(2),d(e),o(),m(i.currentPage>3&&e+2==i.currentPage?4:-1)}}var q=class t{constructor(n,e,i,s){this.router=n;this.route=e;this.http=i;this.cdr=s}count=0;products=[];pagesArray=[1];pages=1;currentPage=1;warn;toDelete;CatParser=["Luminarias de pie","Accesorios","Luminarias de techo","Luminarias de mesa","Luminarias de pared"];CategoryFilter=[];queryParamSubs;filterMenu=!1;ngOnInit(){this.queryParamSubs=this.route.queryParamMap.subscribe(()=>{this.ReadData()})}edit(n){this.router.navigate(["/dashboard/create-product"],{queryParams:{id:n,edit:"true"}})}ReadData(){let n=this.route.snapshot.queryParamMap.get("categories");n?(this.CategoryFilter=[],n.split("-").map(i=>this.CategoryFilter.push(this.CatParser[+i<5&&0<=+i?+i:1])),this.getProducts(n)):this.getProducts()}getProducts(n){this.http.getProducts({category:n}).subscribe({next:e=>{this.products=e,console.log(e),this.count=this.products.length,this.cdr.detectChanges()},error:e=>console.log(e)})}getStock(n){return n.variants.reduce((e,i)=>e+i.stock,0)}onPageChange(n){this.currentPage=n,console.log(n)}onAddFilter(n){this.CategoryFilter.includes(n)||(this.CategoryFilter.push(n),this.router.navigate([],{queryParams:{categories:this.CategoryFilter.map(e=>this.CatParser.indexOf(e)).join("-")},queryParamsHandling:"merge"}))}onDeleteFilter(n){this.CategoryFilter.splice(n,1),this.router.navigate([],{queryParams:{categories:this.CategoryFilter.map(e=>this.CatParser.indexOf(e)).join("-")},queryParamsHandling:"merge"})}delete(n){this.http.deleteProduct(n).subscribe({next:e=>{console.log(e),this.ReadData(),this.cdr.detectChanges()},error:e=>console.log(e)})}ask(n){this.toDelete=n,this.warn={msg:"Eliminar producto",warn:"\xBFEst\xE1s seguro que deseas realizar esta acci\xF3n? Esta acci\xF3n no tiene vuelta atr\xE1s."}}onDecide(n){this.warn=void 0,n&&this.toDelete&&this.delete(this.toDelete.id),this.toDelete=void 0}static \u0275fac=function(e){return new(e||t)(F(L),F(R),F(N),F(z))};static \u0275cmp=M({type:t,selectors:[["app-products"]],decls:49,vars:6,consts:[[1,"products-main"],[1,"warn"],[1,"prod-header"],[1,"prod-actions"],[1,"button-chips"],["src","upload-cloud.svg","alt",""],[1,"button-base",3,"click"],["src","plus.svg","alt",""],[1,"filters"],[1,"filters-dorp-menu"],[1,"button-chips",3,"click"],["src","Filters lines.svg","alt",""],[1,"dropdown-content"],[1,"spacing",2,"flex","1"],[1,"input-base"],["src","search.svg","alt",""],["type","text","placeholder","Buscar"],[1,"prod-container"],[1,"product-list-header"],[1,"count"],[1,"head-bar"],[3,"className"],[1,"pagination"],[1,"button-chips",3,"click","disabled"],["src","arrow-left.svg","alt",""],[1,"pages"],["src","arrow-right.svg","alt",""],[3,"acept","data"],["src","x.svg","alt","",3,"click"],[1,"dropdown-item"],[1,"dropdown-item",3,"click"],[1,"category"],[1,"status"],[1,"actions"],["alt","",3,"src"],[1,"action-button",3,"click"],["src","trash-2.svg","alt",""],["src","edit-2.svg","alt",""],[1,"page"],[1,"page",3,"click","ngClass"]],template:function(e,i){e&1&&(r(0,"div",0),p(1,K,2,1,"div",1),r(2,"header",2)(3,"h1"),c(4,"Productos"),a(),r(5,"div",3)(6,"button",4),u(7,"img",5),r(8,"label"),c(9," Importar "),a()(),r(10,"button",6),x("click",function(){return i.router.navigate(["dashboard/create-product"])}),u(11,"img",7),r(12,"label"),c(13," Agregar Producto "),a()()()(),r(14,"div",8),P(15,Q,4,1,"div",4,h),r(17,"div",9)(18,"button",10),x("click",function(){return i.filterMenu=!i.filterMenu}),u(19,"img",11),r(20,"label"),c(21,"Filtros"),a()(),p(22,Y,3,0,"div",12),a(),u(23,"div",13),r(24,"div",14),u(25,"img",15)(26,"input",16),a()(),r(27,"div",17)(28,"header",18)(29,"h2"),c(30,"Mis productos"),a(),r(31,"div",19)(32,"p"),c(33),a()()(),r(34,"div",20),P(35,ce,6,3,"div",21,h),a(),r(37,"div",22)(38,"button",23),x("click",function(){return i.onPageChange(i.currentPage-1)}),u(39,"img",24),r(40,"label"),c(41,"Anterior"),a()(),r(42,"div",25),P(43,de,5,6,null,null,h),a(),r(45,"button",23),x("click",function(){return i.onPageChange(i.currentPage-1)}),r(46,"label"),c(47,"Siguiente"),a(),u(48,"img",26),a()()()()),e&2&&(o(),m(i.warn?1:-1),o(14),y(i.CategoryFilter),o(7),m(i.filterMenu?22:-1),o(11),S("",i.count," productos"),o(2),y(I(5,U)),o(3),_("disabled",i.currentPage===1),o(5),y(i.pagesArray),o(2),_("disabled",i.currentPage===i.pages))},dependencies:[G,V,w,j],styles:[".products-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.warn[_ngcontent-%COMP%]{position:fixed;z-index:100;width:100%;height:100vh;display:flex;align-items:center;justify-content:center}.prod-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-inline:32px}.prod-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}h1[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:30px;font-style:normal;font-weight:600;line-height:38px;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;padding-inline:32px}.product-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px 24px;gap:8px}.product-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:500;line-height:28px;margin:0}.product-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Brand-700, #007981);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.prod-container[_ngcontent-%COMP%]{margin-inline:32px;display:flex;flex-direction:column;align-items:flex-start;align-self:stretch;border-radius:12px;border:1px solid var(--Gray-200, #E9EAEB);background:var(--White, #FFF);box-shadow:0 1px 3px #0a0d121a,0 1px 2px #0a0d120f}.count[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Brand-50, #F0FEFF)}.head-bar[_ngcontent-%COMP%]{display:flex;align-items:flex-start;align-self:stretch}.head-bar-item[_ngcontent-%COMP%]{display:flex;flex:1;height:44px;padding:12px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);background:var(--Gray-50, #FAFAFA);box-sizing:border-box}.head-bar-item.action[_ngcontent-%COMP%]{min-height:44px}.head-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.column.nombre[_ngcontent-%COMP%]{min-width:312px}.column.action[_ngcontent-%COMP%]{flex:none;width:160px}.column.categor\\ed a[_ngcontent-%COMP%]{width:225px;flex:none}.product-item[_ngcontent-%COMP%]{display:flex;height:72px;padding:16px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);box-sizing:border-box}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.action-button[_ngcontent-%COMP%]{border:none;background:none;padding:10px;border-radius:8px;cursor:pointer}.status[_ngcontent-%COMP%]{display:flex;padding:2px 8px 2px 6px;justify-content:center;align-items:center;gap:6px;border-radius:16px;background:var(--Success-50, #ECFDF3)}.category[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Gray-100, #F5F5F5)}.status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Success-700, #027A48);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px}.pagination[_ngcontent-%COMP%]{display:flex;padding:12px 24px 16px;justify-content:space-between;align-items:center;align-self:stretch;border:0 solid var(--Gray-200, #E9EAEB)}.pages[_ngcontent-%COMP%]{display:flex}.page[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;box-sizing:border-box;padding:12px}.page[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Gray-500, #717680);text-align:center;font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px}.filters-dorp-menu[_ngcontent-%COMP%]{position:relative}.dropdown-content[_ngcontent-%COMP%]{display:flex;width:292px;position:absolute;background-color:var(--White, #FFF);min-width:160px;box-shadow:0 4px 8px #0000001a;border-radius:8px;z-index:1;top:48px;left:0;flex-direction:column;padding:8px 0}.dropdown-item[_ngcontent-%COMP%]{display:flex;padding:10px 14px;align-items:center;gap:8px;align-self:stretch;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:500;line-height:24px;margin:0}.page.active[_ngcontent-%COMP%]{background:#f0feff}.page.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Brand-900, #175659)}"]})};export{q as Products};
