import{a as V}from"./chunk-CJDB6REZ.js";import{$ as k,E as s,F as p,G as C,H as h,I as P,J as x,K as n,L as o,M as m,N as b,O as g,P as l,U as c,V as u,W as F,Y as M,Z as O,_ as w,da as T,fa as I,ga as D,ha as A,m as f,ma as $,n as v,oa as B,t as S,u as a,w as y,x as E}from"./chunk-XAC6VWD2.js";var j=()=>["Nombre","Categor\xEDa","Precio","Stock","Tipolog\xEDa","Estado",""],z=t=>({active:t});function G(t,i){if(t&1){let e=b();n(0,"div",3)(1,"label"),c(2),o(),n(3,"img",26),g("click",function(){let d=f(e).$index,_=l();return v(_.onDeleteFilter(d))}),o()()}if(t&2){let e=i.$implicit;a(2),F(" ",e," ")}}function q(t,i){if(t&1){let e=b();n(0,"div",28),g("click",function(){let d=f(e).$implicit,_=l(2);return v(_.onAddFilter(d))}),n(1,"p"),c(2),o()()}if(t&2){let e=i.$implicit;a(2),u(e)}}function L(t,i){if(t&1&&(n(0,"div",11),h(1,q,3,1,"div",27,C),o()),t&2){let e=l();a(),P(e.CatParser)}}function N(t,i){if(t&1&&(n(0,"p"),c(1),o()),t&2){let e=l().$implicit;a(),u(e.name)}}function H(t,i){if(t&1&&(n(0,"div",29)(1,"p"),c(2),o()()),t&2){let e=l().$implicit;a(2),u(e.category.nombre)}}function U(t,i){if(t&1&&(n(0,"p"),c(1),w(2,"currency"),o()),t&2){let e=l().$implicit;a(),u(e.variants.length==0?"":k(2,1,e.variants[0].price,"USD","symbol","1.2-2"))}}function W(t,i){if(t&1&&(n(0,"p"),c(1),o()),t&2){let e=l().$implicit,r=l(2);a(),u(r.getStock(e))}}function J(t,i){if(t&1&&(n(0,"p"),c(1),o()),t&2){let e=l().$implicit;a(),u(e.typology)}}function K(t,i){t&1&&(n(0,"div",30),m(1,"img",32),n(2,"p"),c(3),o()()),t&2&&(a(),x("src","./_Dot_green.svg",S),a(2),u("Activo"))}function Q(t,i){if(t&1){let e=b();n(0,"div",31)(1,"button",33),g("click",function(){f(e);let d=l().$implicit,_=l(2);return v(_.delete(d.id))}),m(2,"img",34),o(),n(3,"button",33),g("click",function(){f(e);let d=l().$implicit,_=l(2);return v(_.edit(d.id))}),m(4,"img",35),o()()}}function X(t,i){if(t&1&&(n(0,"div",20),s(1,N,2,1,"p"),s(2,H,3,1,"div",29),s(3,U,3,6,"p"),s(4,W,2,1,"p"),s(5,J,2,1,"p"),s(6,K,4,2,"div",30),s(7,Q,5,0,"div",31),o()),t&2){let e=l().$implicit;x("className",`product-item ${e===""?"action":e.toLowerCase()}`),a(),p(e==="Nombre"?1:-1),a(),p(e==="Categor\xEDa"?2:-1),a(),p(e==="Precio"?3:-1),a(),p(e==="Stock"?4:-1),a(),p(e==="Tipolog\xEDa"?5:-1),a(),p(e==="Estado"?6:-1),a(),p(e===""?7:-1)}}function Y(t,i){if(t&1&&(n(0,"div",20)(1,"div",20)(2,"p"),c(3),o()(),h(4,X,8,8,"div",20,C),o()),t&2){let e=i.$implicit,r=l();x("className",`column ${e===""?"action":e.toLowerCase()}`),a(),x("className",`head-bar-item ${e===""?"action":e.toLowerCase()}`),a(2),u(e),a(),P(r.products)}}function Z(t,i){t&1&&(n(0,"div",36)(1,"label"),c(2,"..."),o()())}function ee(t,i){t&1&&(n(0,"div",36)(1,"label"),c(2,"..."),o()())}function te(t,i){if(t&1){let e=b();s(0,Z,3,0,"div",36),n(1,"div",37),g("click",function(){let d=f(e).$implicit,_=l();return v(_.onPageChange(d))}),n(2,"label"),c(3),o()(),s(4,ee,3,0,"div",36)}if(t&2){let e=i.$implicit,r=l();p(e===r.pages&&r.currentPage-r.pages>2?0:-1),a(),x("ngClass",O(4,z,r.currentPage==e)),a(2),u(e),a(),p(r.currentPage>3&&e+2==r.currentPage?4:-1)}}var R=class t{constructor(i,e,r,d){this.router=i;this.route=e;this.http=r;this.cdr=d}count=0;products=[];pagesArray=[1];pages=1;currentPage=1;CatParser=["Luminarias de pie","Accesorios","Luminarias de techo","Luminarias de mesa","Luminarias de pared"];CategoryFilter=[];queryParamSubs;filterMenu=!1;ngOnInit(){this.queryParamSubs=this.route.queryParamMap.subscribe(()=>{this.ReadData()})}edit(i){this.router.navigate(["/dashboard/create-product"],{queryParams:{id:i,edit:"true"}})}ReadData(){let i=this.route.snapshot.queryParamMap.get("categories");i?(this.CategoryFilter=[],i.split("-").map(r=>this.CategoryFilter.push(this.CatParser[+r<5&&0<=+r?+r:1])),this.getProducts(i)):this.getProducts()}getProducts(i){this.http.getProducts({category:i}).subscribe({next:e=>{this.products=e,console.log(e),this.cdr.detectChanges()},error:e=>console.log(e)})}getStock(i){return i.variants.reduce((e,r)=>e+r.stock,0)}onPageChange(i){this.currentPage=i,console.log(i)}onAddFilter(i){this.CategoryFilter.includes(i)||(this.CategoryFilter.push(i),this.router.navigate([],{queryParams:{categories:this.CategoryFilter.map(e=>this.CatParser.indexOf(e)).join("-")},queryParamsHandling:"merge"}))}onDeleteFilter(i){this.CategoryFilter.splice(i,1),this.router.navigate([],{queryParams:{categories:this.CategoryFilter.map(e=>this.CatParser.indexOf(e)).join("-")},queryParamsHandling:"merge"})}delete(i){this.http.deleteProduct(i).subscribe({next:e=>{console.log(e),this.ReadData(),this.cdr.detectChanges()},error:e=>console.log(e)})}static \u0275fac=function(e){return new(e||t)(y(B),y($),y(V),y(T))};static \u0275cmp=E({type:t,selectors:[["app-products"]],decls:48,vars:5,consts:[[1,"products-main"],[1,"prod-header"],[1,"prod-actions"],[1,"button-chips"],["src","upload-cloud.svg","alt",""],[1,"button-base",3,"click"],["src","plus.svg","alt",""],[1,"filters"],[1,"filters-dorp-menu"],[1,"button-chips",3,"click"],["src","Filters lines.svg","alt",""],[1,"dropdown-content"],[1,"spacing",2,"flex","1"],[1,"input-base"],["src","search.svg","alt",""],["type","text","placeholder","Buscar"],[1,"prod-container"],[1,"product-list-header"],[1,"count"],[1,"head-bar"],[3,"className"],[1,"pagination"],[1,"button-chips",3,"click","disabled"],["src","arrow-left.svg","alt",""],[1,"pages"],["src","arrow-right.svg","alt",""],["src","x.svg","alt","",3,"click"],[1,"dropdown-item"],[1,"dropdown-item",3,"click"],[1,"category"],[1,"status"],[1,"actions"],["alt","",3,"src"],[1,"action-button",3,"click"],["src","trash-2.svg","alt",""],["src","edit-2.svg","alt",""],[1,"page"],[1,"page",3,"click","ngClass"]],template:function(e,r){e&1&&(n(0,"div",0)(1,"header",1)(2,"h1"),c(3,"Productos"),o(),n(4,"div",2)(5,"button",3),m(6,"img",4),n(7,"label"),c(8," Importar "),o()(),n(9,"button",5),g("click",function(){return r.router.navigate(["dashboard/create-product"])}),m(10,"img",6),n(11,"label"),c(12," Agregar Producto "),o()()()(),n(13,"div",7),h(14,G,4,1,"div",3,C),n(16,"div",8)(17,"button",9),g("click",function(){return r.filterMenu=!r.filterMenu}),m(18,"img",10),n(19,"label"),c(20,"Filtros"),o()(),s(21,L,3,0,"div",11),o(),m(22,"div",12),n(23,"div",13),m(24,"img",14)(25,"input",15),o()(),n(26,"div",16)(27,"header",17)(28,"h2"),c(29,"Mis productos"),o(),n(30,"div",18)(31,"p"),c(32),o()()(),n(33,"div",19),h(34,Y,6,3,"div",20,C),o(),n(36,"div",21)(37,"button",22),g("click",function(){return r.onPageChange(r.currentPage-1)}),m(38,"img",23),n(39,"label"),c(40,"Anterior"),o()(),n(41,"div",24),h(42,te,5,6,null,null,C),o(),n(44,"button",22),g("click",function(){return r.onPageChange(r.currentPage-1)}),n(45,"label"),c(46,"Siguiente"),o(),m(47,"img",25),o()()()()),e&2&&(a(14),P(r.CategoryFilter),a(7),p(r.filterMenu?21:-1),a(11),F("",r.count," productos"),a(2),P(M(4,j)),a(3),x("disabled",r.currentPage===1),a(5),P(r.pagesArray),a(2),x("disabled",r.currentPage===r.pages))},dependencies:[A,I,D],styles:[".products-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:32px}.prod-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-inline:32px}.prod-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}h1[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:30px;font-style:normal;font-weight:600;line-height:38px;margin:0}.filters[_ngcontent-%COMP%]{display:flex;gap:12px;padding-inline:32px}.product-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px 24px;gap:8px}.product-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:18px;font-style:normal;font-weight:500;line-height:28px;margin:0}.product-list-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Brand-700, #007981);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.prod-container[_ngcontent-%COMP%]{margin-inline:32px;display:flex;flex-direction:column;align-items:flex-start;align-self:stretch;border-radius:12px;border:1px solid var(--Gray-200, #E9EAEB);background:var(--White, #FFF);box-shadow:0 1px 3px #0a0d121a,0 1px 2px #0a0d120f}.count[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Brand-50, #F0FEFF)}.head-bar[_ngcontent-%COMP%]{display:flex;align-items:flex-start;align-self:stretch}.head-bar-item[_ngcontent-%COMP%]{display:flex;flex:1;height:44px;padding:12px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);background:var(--Gray-50, #FAFAFA);box-sizing:border-box}.head-bar-item.action[_ngcontent-%COMP%]{min-height:44px}.head-bar[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-600, #535862);font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px;margin:0}.column[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1}.column.nombre[_ngcontent-%COMP%]{min-width:312px}.column.action[_ngcontent-%COMP%]{flex:none;width:160px}.column.categor\\ed a[_ngcontent-%COMP%]{width:225px;flex:none}.product-item[_ngcontent-%COMP%]{display:flex;height:72px;padding:16px 24px;align-items:center;gap:12px;align-self:stretch;border-bottom:1px solid var(--Gray-200, #E9EAEB);box-sizing:border-box}.actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.action-button[_ngcontent-%COMP%]{border:none;background:none;padding:10px;border-radius:8px;cursor:pointer}.status[_ngcontent-%COMP%]{display:flex;padding:2px 8px 2px 6px;justify-content:center;align-items:center;gap:6px;border-radius:16px;background:var(--Success-50, #ECFDF3)}.category[_ngcontent-%COMP%]{display:flex;padding:2px 8px;justify-content:center;align-items:center;border-radius:16px;background:var(--Gray-100, #F5F5F5)}.status[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Success-700, #027A48);text-align:center;font-family:var(--montser-font);font-size:12px;font-style:normal;font-weight:500;line-height:18px}.pagination[_ngcontent-%COMP%]{display:flex;padding:12px 24px 16px;justify-content:space-between;align-items:center;align-self:stretch;border:0 solid var(--Gray-200, #E9EAEB)}.pages[_ngcontent-%COMP%]{display:flex}.page[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:8px;box-sizing:border-box;padding:12px}.page[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Gray-500, #717680);text-align:center;font-family:var(--montser-font);font-size:14px;font-style:normal;font-weight:500;line-height:20px}.filters-dorp-menu[_ngcontent-%COMP%]{position:relative}.dropdown-content[_ngcontent-%COMP%]{display:flex;width:292px;position:absolute;background-color:var(--White, #FFF);min-width:160px;box-shadow:0 4px 8px #0000001a;border-radius:8px;z-index:1;top:48px;left:0;flex-direction:column;padding:8px 0}.dropdown-item[_ngcontent-%COMP%]{display:flex;padding:10px 14px;align-items:center;gap:8px;align-self:stretch;cursor:pointer}.dropdown-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--Gray-900, #181D27);font-family:var(--montser-font);font-size:16px;font-style:normal;font-weight:500;line-height:24px;margin:0}.page.active[_ngcontent-%COMP%]{background:#f0feff}.page.active[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--Brand-900, #175659)}"]})};export{R as Products};
